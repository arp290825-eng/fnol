{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/pranaynath/Documents/GitHub/fnol/Autonomous-Claims-Orchestrator/services/dashboard/index.ts"],"sourcesContent":["/**\n * Dashboard Microservice\n *\n * Delegates to Python (dashboard.py) for processed claims history:\n * save, list, retrieve by ID, export CSV.\n */\n\nimport { spawn } from 'child_process'\nimport path from 'path'\nimport type { ClaimData } from '@/types/claims'\nimport type { ProcessedClaimSummary } from './types'\n\nconst SCRIPT_PATH = path.join(process.cwd(), 'services', 'dashboard', 'dashboard.py')\nconst PY_CMD = process.platform === 'win32' ? 'python' : 'python3'\n\nasync function runPython(args: string[], stdin?: string): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const proc = spawn(PY_CMD, [SCRIPT_PATH, ...args], {\n      cwd: process.cwd(),\n      env: { ...process.env },\n      stdio: stdin !== undefined ? ['pipe', 'pipe', 'pipe'] : ['ignore', 'pipe', 'pipe'],\n    })\n\n    let stdout = ''\n    let stderr = ''\n\n    proc.stdout?.on('data', (d) => { stdout += d.toString() })\n    proc.stderr?.on('data', (d) => { stderr += d.toString() })\n\n    if (stdin !== undefined && proc.stdin) {\n      proc.stdin.write(stdin, 'utf-8')\n      proc.stdin.end()\n    }\n\n    proc.on('close', (code) => {\n      if (code !== 0) {\n        reject(new Error(stderr || stdout || `Python exited with code ${code}`))\n      } else {\n        resolve(stdout)\n      }\n    })\n\n    proc.on('error', (err) => reject(err))\n  })\n}\n\n/** Save a processed claim to history and CSV */\nexport async function saveProcessedClaim(claim: ClaimData): Promise<void> {\n  const input = JSON.stringify(claim)\n  const out = await runPython(['save'], input)\n  const parsed = JSON.parse(out.trim())\n  if (parsed.error) {\n    throw new Error(parsed.error)\n  }\n}\n\n/** Get list of processed claim summaries for dropdown */\nexport async function getProcessedClaimSummaries(): Promise<ProcessedClaimSummary[]> {\n  const out = await runPython(['list'])\n  return JSON.parse(out.trim())\n}\n\n/** Get full claim data by ID */\nexport async function getProcessedClaimById(claimId: string): Promise<ClaimData | null> {\n  const out = await runPython(['get', claimId])\n  const trimmed = out.trim()\n  if (trimmed === 'null') return null\n  return JSON.parse(trimmed) as ClaimData\n}\n\n/** Get CSV content for export */\nexport async function getCsvContent(): Promise<string> {\n  return runPython(['csv'])\n}\n\n/** Get real-time dashboard KPIs from processed claims */\nexport async function getDashboardKpis(): Promise<{\n  totalClaims: number\n  claimsThisWeek: number\n  claimsThisMonth: number\n  claimsByLossType: Record<string, number>\n  coverageMatchRate: number\n  avgConfidence: number\n  totalDocumentsProcessed: number\n  claimsByDate: Array<{ date: string; count: number }>\n  recentClaims: Array<{\n    claimId: string\n    policyNumber?: string\n    claimantName?: string\n    lossType: string\n    createdAt: string\n    policyMatches: number\n  }>\n}> {\n  const out = await runPython(['stats'])\n  return JSON.parse(out.trim())\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;;;;CAKC,GAED;AACA;;;AAIA,MAAM,cAAc,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,aAAa;AACtE,MAAM,SAAS,sCAA+B,0BAAW;AAEzD,eAAe,UAAU,IAAc,EAAE,KAAc;IACrD,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,OAAO,IAAA,4HAAK,EAAC,QAAQ;YAAC;eAAgB;SAAK,EAAE;YACjD,KAAK,QAAQ,GAAG;YAChB,KAAK;gBAAE,GAAG,QAAQ,GAAG;YAAC;YACtB,OAAO,UAAU,YAAY;gBAAC;gBAAQ;gBAAQ;aAAO,GAAG;gBAAC;gBAAU;gBAAQ;aAAO;QACpF;QAEA,IAAI,SAAS;QACb,IAAI,SAAS;QAEb,KAAK,MAAM,EAAE,GAAG,QAAQ,CAAC;YAAQ,UAAU,EAAE,QAAQ;QAAG;QACxD,KAAK,MAAM,EAAE,GAAG,QAAQ,CAAC;YAAQ,UAAU,EAAE,QAAQ;QAAG;QAExD,IAAI,UAAU,aAAa,KAAK,KAAK,EAAE;YACrC,KAAK,KAAK,CAAC,KAAK,CAAC,OAAO;YACxB,KAAK,KAAK,CAAC,GAAG;QAChB;QAEA,KAAK,EAAE,CAAC,SAAS,CAAC;YAChB,IAAI,SAAS,GAAG;gBACd,OAAO,IAAI,MAAM,UAAU,UAAU,CAAC,wBAAwB,EAAE,MAAM;YACxE,OAAO;gBACL,QAAQ;YACV;QACF;QAEA,KAAK,EAAE,CAAC,SAAS,CAAC,MAAQ,OAAO;IACnC;AACF;AAGO,eAAe,mBAAmB,KAAgB;IACvD,MAAM,QAAQ,KAAK,SAAS,CAAC;IAC7B,MAAM,MAAM,MAAM,UAAU;QAAC;KAAO,EAAE;IACtC,MAAM,SAAS,KAAK,KAAK,CAAC,IAAI,IAAI;IAClC,IAAI,OAAO,KAAK,EAAE;QAChB,MAAM,IAAI,MAAM,OAAO,KAAK;IAC9B;AACF;AAGO,eAAe;IACpB,MAAM,MAAM,MAAM,UAAU;QAAC;KAAO;IACpC,OAAO,KAAK,KAAK,CAAC,IAAI,IAAI;AAC5B;AAGO,eAAe,sBAAsB,OAAe;IACzD,MAAM,MAAM,MAAM,UAAU;QAAC;QAAO;KAAQ;IAC5C,MAAM,UAAU,IAAI,IAAI;IACxB,IAAI,YAAY,QAAQ,OAAO;IAC/B,OAAO,KAAK,KAAK,CAAC;AACpB;AAGO,eAAe;IACpB,OAAO,UAAU;QAAC;KAAM;AAC1B;AAGO,eAAe;IAkBpB,MAAM,MAAM,MAAM,UAAU;QAAC;KAAQ;IACrC,OAAO,KAAK,KAAK,CAAC,IAAI,IAAI;AAC5B"}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///Users/pranaynath/Documents/GitHub/fnol/Autonomous-Claims-Orchestrator/app/api/claims/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { saveProcessedClaim, getProcessedClaimSummaries } from '@/services/dashboard'\nimport { ClaimData } from '@/types/claims'\n\n/** GET /api/claims - List all processed claims for dropdown */\nexport async function GET() {\n  try {\n    const summaries = await getProcessedClaimSummaries()\n    return NextResponse.json(summaries)\n  } catch (error) {\n    console.error('List claims error:', error)\n    return NextResponse.json({ error: 'Failed to list claims' }, { status: 500 })\n  }\n}\n\n/** POST /api/claims - Save a processed claim to history and CSV */\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json() as ClaimData\n    if (!body?.decisionPack) {\n      return NextResponse.json({ error: 'Invalid claim data' }, { status: 400 })\n    }\n    await saveProcessedClaim(body)\n    return NextResponse.json({ success: true, claimId: body.claimId })\n  } catch (error) {\n    console.error('Save claim error:', error)\n    return NextResponse.json({ error: 'Failed to save claim' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAIO,eAAe;IACpB,IAAI;QACF,MAAM,YAAY,MAAM,IAAA,sMAA0B;QAClD,OAAO,wLAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,wLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF;AAGO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,IAAI,CAAC,MAAM,cAAc;YACvB,OAAO,wLAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAqB,GAAG;gBAAE,QAAQ;YAAI;QAC1E;QACA,MAAM,IAAA,8LAAkB,EAAC;QACzB,OAAO,wLAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,SAAS,KAAK,OAAO;QAAC;IAClE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,wLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF"}}]
}