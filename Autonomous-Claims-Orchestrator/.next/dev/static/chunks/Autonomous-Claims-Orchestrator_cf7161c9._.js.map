{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/pranaynath/Documents/GitHub/fnol/Autonomous-Claims-Orchestrator/components/ConfigModal.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useEffect } from 'react'\nimport { X, Key, CheckCircle, AlertCircle } from 'lucide-react'\n\ninterface ConfigModalProps {\n  isOpen: boolean\n  onClose: () => void\n  onSave: (apiKey: string) => void\n}\n\nexport default function ConfigModal({ isOpen, onClose, onSave }: ConfigModalProps) {\n  const [apiKey, setApiKey] = useState('')\n  const [showKey, setShowKey] = useState(false)\n  const [isValid, setIsValid] = useState(false)\n\n  useEffect(() => {\n    // Load saved API key from localStorage\n    if (typeof window !== 'undefined') {\n      const savedKey = localStorage.getItem('openai_api_key')\n      if (savedKey) {\n        setApiKey(savedKey)\n        setIsValid(savedKey.startsWith('sk-') && savedKey.length > 20)\n      }\n    }\n  }, [isOpen])\n\n  const handleSave = () => {\n    if (apiKey.trim()) {\n      // Save to localStorage and window for immediate use\n      if (typeof window !== 'undefined') {\n        localStorage.setItem('openai_api_key', apiKey.trim())\n        ;(window as any).OPENAI_API_KEY = apiKey.trim()\n      }\n      onSave(apiKey.trim())\n      onClose()\n    }\n  }\n\n  const handleApiKeyChange = (value: string) => {\n    setApiKey(value)\n    setIsValid(value.startsWith('sk-') && value.length > 20)\n  }\n\n  const clearApiKey = () => {\n    setApiKey('')\n    setIsValid(false)\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('openai_api_key')\n      delete (window as any).OPENAI_API_KEY\n    }\n    onSave('')\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md mx-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">OpenAI Configuration</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              OpenAI API Key\n            </label>\n            <div className=\"relative\">\n              <input\n                type={showKey ? 'text' : 'password'}\n                value={apiKey}\n                onChange={(e) => handleApiKeyChange(e.target.value)}\n                placeholder=\"sk-...\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 pr-12\"\n              />\n              <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1\">\n                {isValid ? (\n                  <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                ) : apiKey ? (\n                  <AlertCircle className=\"w-4 h-4 text-red-500\" />\n                ) : null}\n                <button\n                  onClick={() => setShowKey(!showKey)}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <Key className=\"w-4 h-4\" />\n                </button>\n              </div>\n            </div>\n            {apiKey && !isValid && (\n              <p className=\"text-sm text-red-600 mt-1\">\n                API key should start with 'sk-' and be at least 20 characters\n              </p>\n            )}\n          </div>\n\n          <div className=\"bg-blue-50 border border-blue-200 rounded-md p-3\">\n            <h3 className=\"text-sm font-medium text-blue-900 mb-1\">How to get your API key:</h3>\n            <ol className=\"text-sm text-blue-800 space-y-1\">\n              <li>1. Go to <a href=\"https://platform.openai.com/api-keys\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"underline\">platform.openai.com/api-keys</a></li>\n              <li>2. Click \"Create new secret key\"</li>\n              <li>3. Copy the key and paste it here</li>\n            </ol>\n          </div>\n\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-md p-3\">\n            <p className=\"text-sm text-yellow-800\">\n              <strong>Demo Mode:</strong> Without an API key, the system will use simulated responses. \n              With a real API key, you'll get actual AI-powered extraction and analysis.\n            </p>\n          </div>\n\n          <div className=\"flex justify-between pt-4\">\n            <button\n              onClick={clearApiKey}\n              className=\"px-4 py-2 text-sm text-red-600 hover:text-red-800\"\n            >\n              Clear Key\n            </button>\n            <div className=\"space-x-2\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 text-sm text-gray-600 hover:text-gray-800\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSave}\n                className=\"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50\"\n                disabled={!apiKey.trim()}\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 343, "column": 0}, "map": {"version":3,"sources":["file:///Users/pranaynath/Documents/GitHub/fnol/Autonomous-Claims-Orchestrator/components/Header.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useEffect } from 'react'\nimport { ProcessingStage } from '@/types/claims'\nimport { motion } from 'framer-motion'\nimport { \n  Home, \n  Search, \n  CheckCircle, \n  BarChart3,\n  Zap,\n  Settings,\n  Brain,\n  LogOut,\n  User\n} from 'lucide-react'\nimport ConfigModal from './ConfigModal'\nimport { useAuth } from '@/lib/auth/AuthContext'\n\ninterface HeaderProps {\n  currentStage: ProcessingStage\n  onStageChange: (stage: ProcessingStage) => void\n}\n\nconst stages = [\n  { id: 'home', label: 'Ingest', icon: Home, description: 'Select Policy & Process' },\n  { id: 'review', label: 'Review', icon: Search, description: 'Extraction & Evidence' },\n  { id: 'decision', label: 'Decision', icon: CheckCircle, description: 'Draft Claim & Actions' },\n  { id: 'dashboard', label: 'Dashboard', icon: BarChart3, description: 'Ops & Metrics' },\n] as const\n\nexport default function Header({ currentStage, onStageChange }: HeaderProps) {\n  const [showConfig, setShowConfig] = useState(false)\n  const [hasOpenAIKey, setHasOpenAIKey] = useState(false)\n  const { user, logout } = useAuth()\n\n  useEffect(() => {\n    // Check for OpenAI API key\n    const checkOpenAIKey = () => {\n      if (typeof window !== 'undefined') {\n        const key = localStorage.getItem('openai_api_key') || (window as any).OPENAI_API_KEY\n        setHasOpenAIKey(!!key)\n      }\n    }\n    \n    checkOpenAIKey()\n    // Check periodically in case key is updated elsewhere\n    const interval = setInterval(checkOpenAIKey, 2000)\n    return () => clearInterval(interval)\n  }, [])\n\n  const handleConfigSave = (apiKey: string) => {\n    setHasOpenAIKey(!!apiKey)\n  }\n\n  return (\n    <>\n      <header className=\"bg-white border-b border-[#E5E7EB] sticky top-0 z-50\">\n        <div className=\"container mx-auto px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            {/* Logo */}\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"flex items-center justify-center w-8 h-8 bg-[#2563EB] rounded\">\n                <Zap className=\"w-4 h-4 text-white\" />\n              </div>\n              <div className=\"flex flex-col\">\n                <h1 className=\"text-lg font-semibold text-[#111827]\">\n                  Claims Fast Lane\n                </h1>\n                <p className=\"text-xs text-[#9CA3AF] font-medium\">by AI Mill</p>\n              </div>\n            </div>\n\n            {/* Navigation */}\n            <nav className=\"flex items-center space-x-1\">\n              {stages.map((stage, index) => {\n                const Icon = stage.icon\n                const isActive = currentStage === stage.id\n                \n                return (\n                  <button\n                    key={stage.id}\n                    onClick={() => onStageChange(stage.id as ProcessingStage)}\n                    className={`\n                      flex items-center space-x-2 px-4 py-2 text-sm font-medium transition-colors\n                      ${isActive \n                        ? 'text-[#2563EB] border-b-2 border-[#2563EB]' \n                        : 'text-[#6B7280] hover:text-[#374151]'\n                      }\n                    `}\n                  >\n                    <Icon className=\"w-4 h-4\" />\n                    <span className=\"hidden sm:inline\">{stage.label}</span>\n                  </button>\n                )\n              })}\n            </nav>\n\n            {/* Secondary controls - visually muted */}\n            <div className=\"flex items-center space-x-3\">\n              {hasOpenAIKey ? (\n                <div className=\"flex items-center space-x-1.5 text-[#9CA3AF]\">\n                  <Brain className=\"w-3.5 h-3.5\" />\n                  <span className=\"text-xs\">AI</span>\n                </div>\n              ) : (\n                <div className=\"flex items-center space-x-1.5 text-[#9CA3AF]\">\n                  <Zap className=\"w-3.5 h-3.5\" />\n                  <span className=\"text-xs\">Demo</span>\n                </div>\n              )}\n              <button \n                onClick={() => setShowConfig(true)}\n                className=\"p-1.5 text-[#9CA3AF] hover:text-[#6B7280] transition-colors\"\n                title=\"Settings\"\n              >\n                <Settings className=\"w-4 h-4\" />\n              </button>\n              {/* User info and logout */}\n              {user && (\n                <div className=\"flex items-center space-x-2 px-3 py-1.5 rounded-lg bg-[#F3F4F6]\">\n                  <User className=\"w-3.5 h-3.5 text-[#6B7280]\" />\n                  <span className=\"text-xs text-[#6B7280] font-medium hidden sm:inline\">\n                    {user.name}\n                  </span>\n                </div>\n              )}\n              <button\n                onClick={logout}\n                className=\"p-1.5 text-[#9CA3AF] hover:text-[#EF4444] transition-colors\"\n                title=\"Logout\"\n              >\n                <LogOut className=\"w-4 h-4\" />\n              </button>\n              {/* Image at the very right */}\n              <div className=\"flex items-center space-x-2 ml-2\">\n                <img \n                  src=\"/image.png\" \n                  alt=\"AI Mill\" \n                  className=\"h-10 w-auto object-contain\"\n                />\n                <span className=\"text-xs text-[#9CA3AF] font-medium\">By AI Mill</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n    <ConfigModal\n      isOpen={showConfig}\n      onClose={() => setShowConfig(false)}\n      onSave={handleConfigSave}\n    />\n  </>\n  )\n} "],"names":[],"mappings":"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"}},
    {"offset": {"line": 697, "column": 0}, "map": {"version":3,"sources":["file:///Users/pranaynath/Documents/GitHub/fnol/Autonomous-Claims-Orchestrator/components/HomePage.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport {\n  Mail,\n  FileText,\n  Image,\n  AlertCircle,\n  Play,\n  Clock,\n  CheckCircle,\n  Inbox,\n  RefreshCw,\n  Trash2,\n} from 'lucide-react'\nimport { ClaimData } from '@/types/claims'\n\ninterface HomePageProps {\n  onProcessClaim: (data: ClaimData) => void\n  isProcessing: boolean\n  setIsProcessing: (processing: boolean) => void\n}\n\ninterface IngestedClaim {\n  id: string\n  policyNumber: string\n  from: string\n  to: string\n  subject: string\n  emailBody: string\n  attachments: Array<{ name: string; path: string; size: number; mimeType: string }>\n  createdAt: string\n  source: 'sendgrid' | 'demo' | 'imap'\n}\n\ninterface PolicyOption {\n  id: string\n  policyNumber: string\n  subject: string\n}\n\nexport default function HomePage({ onProcessClaim, isProcessing, setIsProcessing }: HomePageProps) {\n  const [policyOptions, setPolicyOptions] = useState<PolicyOption[]>([])\n  const [selectedClaim, setSelectedClaim] = useState<IngestedClaim | null>(null)\n  const [loadingPolicies, setLoadingPolicies] = useState(true)\n  const [loadingClaim, setLoadingClaim] = useState(false)\n  const [syncingInbox, setSyncingInbox] = useState(false)\n  const [syncMessage, setSyncMessage] = useState('')\n  const [clearingClaims, setClearingClaims] = useState(false)\n  const [error, setError] = useState('')\n  const [processingSteps, setProcessingSteps] = useState<string[]>([])\n  const [currentStep, setCurrentStep] = useState('')\n\n  useEffect(() => {\n    fetchPolicyOptions()\n  }, [])\n\n  const handleClearClaims = async () => {\n    if (!confirm('Clear all ingested claims? This cannot be undone.')) return\n    setClearingClaims(true)\n    setError('')\n    setSyncMessage('')\n    try {\n      const res = await fetch('/api/ingested-claims/clear', { method: 'POST' })\n      if (!res.ok) throw new Error('Clear failed')\n      setSelectedClaim(null)\n      await fetchPolicyOptions()\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to clear')\n    } finally {\n      setClearingClaims(false)\n    }\n  }\n\n  const handleSyncInbox = async () => {\n    setSyncingInbox(true)\n    setError('')\n    setSyncMessage('')\n    try {\n      const res = await fetch('/api/sync-inbox', { method: 'POST' })\n      const data = await res.json()\n      if (!res.ok) throw new Error(data.errors?.[0] || 'Sync failed')\n      if (data.ingested > 0) {\n        const parts = [`${data.ingested} new claim(s) ingested`]\n        if (data.skippedDuplicate > 0) parts.push(`${data.skippedDuplicate} duplicate(s) skipped`)\n        setSyncMessage(parts.join('. '))\n      } else if (data.scanned > 0 && data.skippedNoFnol === data.scanned) {\n        setSyncMessage(`Scanned ${data.scanned} — none matched FNOL (fnol/claim/damage)`)\n      } else if (data.scanned > 0 && data.skippedDuplicate === data.scanned) {\n        setSyncMessage(`Scanned ${data.scanned} — all already ingested`)\n      } else if (data.scanned === 0) {\n        setSyncMessage(data.hint || 'No emails to sync')\n      } else {\n        setSyncMessage('No new FNOL emails to ingest')\n      }\n      await fetchPolicyOptions()\n      if (data.errors?.length) setError(data.errors.join('; '))\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to sync inbox')\n    } finally {\n      setSyncingInbox(false)\n    }\n  }\n\n  const fetchPolicyOptions = async () => {\n    setLoadingPolicies(true)\n    setError('')\n    try {\n      const res = await fetch('/api/ingested-claims')\n      if (!res.ok) throw new Error('Failed to load claims')\n      const data = await res.json()\n      setPolicyOptions(data)\n    } catch (err) {\n      setError('Unable to load ingested claims. Please try again.')\n      setPolicyOptions([])\n    } finally {\n      setLoadingPolicies(false)\n    }\n  }\n\n  const handleSelectPolicy = async (claimId: string) => {\n    if (!claimId) {\n      setSelectedClaim(null)\n      return\n    }\n    setLoadingClaim(true)\n    setError('')\n    try {\n      const res = await fetch(`/api/ingested-claims/${claimId}`)\n      if (!res.ok) throw new Error('Failed to load claim')\n      const data = await res.json()\n      setSelectedClaim(data)\n    } catch (err) {\n      setError('Unable to load claim details.')\n      setSelectedClaim(null)\n    } finally {\n      setLoadingClaim(false)\n    }\n  }\n\n  const handleProcessClaim = async () => {\n    if (!selectedClaim) return\n    setError('')\n    setIsProcessing(true)\n    setProcessingSteps([])\n    setCurrentStep('')\n\n    const steps = [\n      'Ingestion Agent: Normalizing email and attachments...',\n      'Document Classifier: Analyzing document types...',\n      'Extraction Agent: Extracting claim fields...',\n      'Policy RAG Agent: Querying policy database...',\n      'Assembler Agent: Building decision pack...',\n    ]\n\n    for (let i = 0; i < steps.length; i++) {\n      setCurrentStep(steps[i])\n      setProcessingSteps((prev) => [...prev, steps[i]])\n      await new Promise((resolve) => setTimeout(resolve, 800))\n    }\n\n    try {\n      const res = await fetch('/api/process-claim', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ ingestedClaimId: selectedClaim.id }),\n      })\n      const data = await res.json()\n      if (!res.ok) throw new Error(data.error || 'Processing failed')\n      onProcessClaim(data)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Claim processing failed')\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  const canProcess = !!selectedClaim && !isProcessing\n\n  return (\n    <div className=\"relative min-h-screen\">\n      {/* Grid Background */}\n      <div\n        className=\"absolute inset-0 pointer-events-none z-0\"\n        style={{\n          backgroundImage: `\n            linear-gradient(to right, rgba(37, 99, 235, 0.06) 1px, transparent 1px),\n            linear-gradient(to bottom, rgba(37, 99, 235, 0.06) 1px, transparent 1px)\n          `,\n          backgroundSize: '48px 48px',\n        }}\n      />\n\n      <div className=\"max-w-6xl mx-auto relative z-10\">\n        {/* Hero Section */}\n        <div className=\"text-center mb-16 pt-12 relative\">\n          <div className=\"absolute inset-0 -top-20 -bottom-20 flex items-center justify-center pointer-events-none\">\n            <div className=\"w-full max-w-2xl h-64 bg-gradient-radial from-[#2563EB]/10 via-[#7C3AED]/5 to-transparent rounded-full blur-3xl\" />\n          </div>\n          <div className=\"relative z-10\">\n            <span className=\"inline-block text-xs font-semibold text-[#6366F1] uppercase tracking-widest mb-6\">\n              FNOL Auto-Ingestion\n            </span>\n            <h1 className=\"text-6xl font-bold text-[#0F172A] mb-6 tracking-tight leading-tight\">\n              Claims Processing\n              <br />\n              <span className=\"bg-gradient-to-r from-[#2563EB] to-[#7C3AED] bg-clip-text text-transparent\">\n                Inbox Portal\n              </span>\n            </h1>\n            <p className=\"text-xl text-[#475569] max-w-2xl mx-auto mb-3 font-medium leading-relaxed\">\n              Select a policy number to review and process the corresponding FNOL submission\n            </p>\n            <p className=\"text-base text-[#64748B] max-w-xl mx-auto\">\n              First notice of loss submissions and supporting documentation are ingested automatically\n            </p>\n          </div>\n        </div>\n\n        {/* Action Bar: Sync Inbox & Clear All */}\n        <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4 mb-10 relative z-10\">\n          <div className=\"flex items-center gap-3\">\n            <button\n              onClick={handleSyncInbox}\n              disabled={syncingInbox || loadingPolicies}\n              className=\"flex items-center gap-2 px-5 py-2.5 text-sm font-semibold text-white bg-[#6366F1] hover:bg-[#4F46E5] rounded-xl shadow-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n              title=\"Fetch FNOL emails from inbox\"\n            >\n              <RefreshCw className={`w-4 h-4 ${syncingInbox ? 'animate-spin' : ''}`} />\n              Sync Inbox\n            </button>\n            <button\n              onClick={handleClearClaims}\n              disabled={clearingClaims || loadingPolicies || policyOptions.length === 0}\n              className=\"flex items-center gap-2 px-5 py-2.5 text-sm font-medium text-[#64748B] bg-white border border-[#E2E8F0] hover:border-[#dc2626] hover:text-[#dc2626] rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n              title=\"Clear all ingested claims\"\n            >\n              <Trash2 className={`w-4 h-4 ${clearingClaims ? 'animate-pulse' : ''}`} />\n              Clear All\n            </button>\n          </div>\n          {syncMessage && (\n            <span className=\"text-sm text-[#059669] font-medium\">{syncMessage}</span>\n          )}\n        </div>\n\n        {/* Policy Selection & Content */}\n        <div className=\"grid lg:grid-cols-2 gap-8 mb-16 relative z-10\">\n          {/* Left: Policy Selector & Email Preview */}\n          <div className=\"card-glass p-8 h-full flex flex-col relative overflow-hidden\">\n            <div className=\"absolute inset-0 bg-gradient-to-br from-[#2563EB]/5 via-transparent to-[#7C3AED]/5 pointer-events-none\" />\n            <div className=\"relative z-10 flex flex-col h-full\">\n              <div className=\"flex items-center space-x-2 mb-6\">\n                <div className=\"p-2 bg-gradient-to-br from-[#2563EB]/10 to-[#7C3AED]/10 rounded-lg\">\n                  <Inbox className=\"w-5 h-5 text-[#6366F1]\" />\n                </div>\n                <h2 className=\"text-sm font-semibold text-[#475569] uppercase tracking-wider\">\n                  Auto-Ingested FNOL Emails\n                </h2>\n              </div>\n\n              {/* Policy Dropdown */}\n              <div className=\"space-y-2 mb-6\">\n                <label className=\"block text-sm font-medium text-[#334155]\">Policy Number</label>\n                <select\n                  value={selectedClaim?.id ?? ''}\n                  onChange={(e) => handleSelectPolicy(e.target.value)}\n                  disabled={loadingPolicies}\n                  className=\"w-full px-4 py-3 bg-white/80 border border-[#E2E8F0] rounded-xl text-[#0F172A] focus:outline-none focus:ring-2 focus:ring-[#6366F1]/30 focus:border-[#6366F1] transition-all appearance-none cursor-pointer\"\n                  style={{\n                    backgroundImage: `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394A3B8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E\")`,\n                    backgroundRepeat: 'no-repeat',\n                    backgroundPosition: 'right 12px center',\n                    backgroundSize: '20px',\n                    paddingRight: '44px',\n                  }}\n                >\n                  <option value=\"\">\n                    {loadingPolicies ? 'Loading...' : 'Select policy to view FNOL email'}\n                  </option>\n                  {policyOptions.map((opt) => (\n                    <option key={opt.id} value={opt.id}>\n                      {opt.policyNumber} — {opt.subject.slice(0, 50)}{opt.subject.length > 50 ? '...' : ''}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              {/* Email Body (Read-only) */}\n              <div className=\"flex-1 flex flex-col min-h-0\">\n                <div className=\"flex items-center space-x-2 mb-3\">\n                  <Mail className=\"w-4 h-4 text-[#6366F1]\" />\n                  <span className=\"text-xs font-semibold text-[#475569] uppercase tracking-wider\">\n                    Email Content\n                  </span>\n                </div>\n                <div className=\"flex-1 min-h-[280px] overflow-auto\">\n                  {loadingClaim ? (\n                    <div className=\"flex items-center justify-center h-full text-[#94A3B8]\">\n                      <RefreshCw className=\"w-6 h-6 animate-spin mr-2\" />\n                      Loading...\n                    </div>\n                  ) : selectedClaim ? (\n                    <pre className=\"w-full p-4 bg-white/60 rounded-xl border border-[#E2E8F0] text-sm text-[#334155] whitespace-pre-wrap font-sans leading-relaxed\">\n                      {selectedClaim.emailBody}\n                    </pre>\n                  ) : (\n                    <div className=\"h-full flex items-center justify-center p-8 border-2 border-dashed border-[#E2E8F0] rounded-xl bg-white/30 text-[#94A3B8] text-sm text-center\">\n                      Select a policy number to view the auto-ingested FNOL email\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Right: Attachments */}\n          <div className=\"card-glass p-8 h-full flex flex-col relative overflow-hidden\">\n            <div className=\"absolute inset-0 bg-gradient-to-br from-[#7C3AED]/5 via-transparent to-[#2563EB]/5 pointer-events-none\" />\n            <div className=\"relative z-10 flex flex-col h-full\">\n              <div className=\"flex items-center space-x-2 mb-6\">\n                <div className=\"p-2 bg-gradient-to-br from-[#7C3AED]/10 to-[#2563EB]/10 rounded-lg\">\n                  <FileText className=\"w-5 h-5 text-[#6366F1]\" />\n                </div>\n                <h2 className=\"text-sm font-semibold text-[#475569] uppercase tracking-wider\">\n                  Attachments\n                </h2>\n              </div>\n\n              <div className=\"flex-1 min-h-[340px] overflow-auto\">\n                {selectedClaim?.attachments && selectedClaim.attachments.length > 0 ? (\n                  <div className=\"space-y-3\">\n                    {selectedClaim.attachments.map((att) => (\n                      <div\n                        key={att.name}\n                        className=\"flex items-center justify-between p-4 bg-white/60 backdrop-blur-sm rounded-xl border border-[#E2E8F0] hover:border-[#CBD5E1] hover:shadow-md transition-all\"\n                      >\n                        <div className=\"flex items-center space-x-3 min-w-0 flex-1\">\n                          {att.mimeType.startsWith('image/') ? (\n                            <div className=\"p-2 bg-[#EEF2FF] rounded-lg\">\n                              <Image className=\"w-4 h-4 text-[#6366F1] flex-shrink-0\" />\n                            </div>\n                          ) : (\n                            <div className=\"p-2 bg-[#F3E8FF] rounded-lg\">\n                              <FileText className=\"w-4 h-4 text-[#7C3AED] flex-shrink-0\" />\n                            </div>\n                          )}\n                          <div className=\"min-w-0 flex-1\">\n                            <p className=\"text-sm font-semibold text-[#0F172A] truncate\">\n                              {att.name}\n                            </p>\n                            <p className=\"text-xs text-[#94A3B8] font-medium\">\n                              {(att.size / 1024).toFixed(1)} KB\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : selectedClaim ? (\n                  <div className=\"h-full flex items-center justify-center p-8 border-2 border-dashed border-[#E2E8F0] rounded-xl bg-white/30 text-[#94A3B8] text-sm text-center\">\n                    No attachments for this claim\n                  </div>\n                ) : (\n                  <div className=\"h-full flex items-center justify-center p-8 border-2 border-dashed border-[#E2E8F0] rounded-xl bg-white/30 text-[#94A3B8] text-sm text-center\">\n                    Select a policy to view attachments\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Error Message */}\n        {error && (\n          <div className=\"mb-6 flex items-start space-x-2 p-4 bg-red-50 border border-red-100 rounded-xl\">\n            <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n            <p className=\"text-sm text-red-700\">{error}</p>\n          </div>\n        )}\n\n        {/* Process Button */}\n        <div className=\"text-center mb-16 relative z-10\">\n          <button\n            onClick={handleProcessClaim}\n            disabled={!canProcess}\n            className=\"btn-primary disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 active:scale-100 transition-transform duration-200\"\n          >\n            {isProcessing ? (\n              <div className=\"flex items-center space-x-3\">\n                <Clock className=\"w-5 h-5 animate-spin\" />\n                <span>Processing...</span>\n              </div>\n            ) : (\n              <div className=\"flex items-center space-x-3\">\n                <Play className=\"w-5 h-5\" />\n                <span>Process Claim Insights</span>\n              </div>\n            )}\n          </button>\n        </div>\n\n        {/* Processing Steps */}\n        {isProcessing && (\n          <div className=\"card-glass p-8 relative overflow-hidden z-10\">\n            <div className=\"absolute inset-0 bg-gradient-to-br from-[#EEF2FF]/50 via-transparent to-[#F3E8FF]/50 pointer-events-none\" />\n            <div className=\"relative z-10\">\n              <h3 className=\"text-sm font-semibold text-[#475569] uppercase tracking-wider mb-6\">\n                Processing Steps\n              </h3>\n              <div className=\"space-y-3\">\n                {processingSteps.map((step, index) => (\n                  <div\n                    key={index}\n                    className=\"flex items-center space-x-4 p-4 bg-white/60 backdrop-blur-sm rounded-xl border border-[#E2E8F0]\"\n                  >\n                    <div className=\"p-1.5 bg-gradient-to-br from-[#10B981] to-[#059669] rounded-full\">\n                      <CheckCircle className=\"w-4 h-4 text-white flex-shrink-0\" />\n                    </div>\n                    <span className=\"text-sm text-[#334155] font-medium\">{step}</span>\n                  </div>\n                ))}\n                {currentStep && !processingSteps.includes(currentStep) && (\n                  <div className=\"flex items-center space-x-4 p-4 bg-gradient-to-r from-[#EEF2FF] to-[#F3E8FF] rounded-xl border border-[#C7D2FE]\">\n                    <div className=\"p-1.5 bg-gradient-to-br from-[#6366F1] to-[#7C3AED] rounded-full\">\n                      <Clock className=\"w-4 h-4 text-white animate-spin flex-shrink-0\" />\n                    </div>\n                    <span className=\"text-sm text-[#4338CA] font-semibold\">{currentStep}</span>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1587, "column": 0}, "map": {"version":3,"sources":["file:///Users/pranaynath/Documents/GitHub/fnol/Autonomous-Claims-Orchestrator/lib/confidence.ts"],"sourcesContent":["/**\n * Confidence score thresholds used across the application.\n * All displayed confidence values should be real-time (from extraction), not static.\n */\n\nexport const CONFIDENCE = {\n  /** High: auto-approve / trusted */\n  THRESHOLD_HIGH: 0.8,\n  /** Medium: proceed with normal review */\n  THRESHOLD_MEDIUM: 0.6,\n  /** Low: requires manual review */\n  THRESHOLD_LOW: 0,\n} as const\n\nexport function isHighConfidence(c: number): boolean {\n  return c >= CONFIDENCE.THRESHOLD_HIGH\n}\n\nexport function isMediumConfidence(c: number): boolean {\n  return c >= CONFIDENCE.THRESHOLD_MEDIUM && c < CONFIDENCE.THRESHOLD_HIGH\n}\n\nexport function isLowConfidence(c: number): boolean {\n  return c < CONFIDENCE.THRESHOLD_MEDIUM\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;AAEM,MAAM,aAAa;IACxB,iCAAiC,GACjC,gBAAgB;IAChB,uCAAuC,GACvC,kBAAkB;IAClB,gCAAgC,GAChC,eAAe;AACjB;AAEO,SAAS,iBAAiB,CAAS;IACxC,OAAO,KAAK,WAAW,cAAc;AACvC;AAEO,SAAS,mBAAmB,CAAS;IAC1C,OAAO,KAAK,WAAW,gBAAgB,IAAI,IAAI,WAAW,cAAc;AAC1E;AAEO,SAAS,gBAAgB,CAAS;IACvC,OAAO,IAAI,WAAW,gBAAgB;AACxC"}},
    {"offset": {"line": 1621, "column": 0}, "map": {"version":3,"sources":["file:///Users/pranaynath/Documents/GitHub/fnol/Autonomous-Claims-Orchestrator/components/ClaimSummaryBar.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { ArrowLeft, ArrowRight, ChevronDown, Download } from 'lucide-react'\nimport { ClaimData } from '@/types/claims'\nimport { CONFIDENCE } from '@/lib/confidence'\nimport type { ProcessedClaimSummary } from '@/lib/processedClaims'\n\ninterface ClaimSummaryBarProps {\n  claimData: ClaimData\n  onBack?: () => void\n  onContinue?: () => void\n  continueLabel?: string\n  showActions?: boolean\n  showClaimDropdown?: boolean\n  onClaimSelect?: (claimId: string) => void\n}\n\nexport default function ClaimSummaryBar({\n  claimData,\n  onBack,\n  onContinue,\n  continueLabel = 'Continue',\n  showActions = true,\n  showClaimDropdown = false,\n  onClaimSelect,\n}: ClaimSummaryBarProps) {\n  const [processedClaims, setProcessedClaims] = useState<ProcessedClaimSummary[]>([])\n  const [dropdownOpen, setDropdownOpen] = useState(false)\n\n  useEffect(() => {\n    if (showClaimDropdown) {\n      fetch('/api/claims')\n        .then((r) => r.json())\n        .then((data) => setProcessedClaims(Array.isArray(data) ? data : []))\n        .catch(() => setProcessedClaims([]))\n    }\n  }, [showClaimDropdown])\n\n  const { decisionPack, claimId, status } = claimData\n  const claimDraft = decisionPack?.claimDraft\n  const evidence = decisionPack?.evidence ?? []\n  const displayClaimId = claimId || claimDraft?.id || 'N/A'\n  const overallConfidence =\n    evidence.length > 0\n      ? Math.round(\n          (evidence.reduce((s, e) => s + e.confidence, 0) / evidence.length) * 100\n        )\n      : 0\n\n  const getStatusColor = (s?: string) => {\n    if (!s) return 'bg-[#E5E7EB] text-[#374151]'\n    const lower = s.toLowerCase()\n    if (lower.includes('complete') || lower.includes('approved')) return 'bg-[#ECFDF5] text-[#047857]'\n    if (lower.includes('pending') || lower.includes('processing')) return 'bg-[#EFF6FF] text-[#1E40AF]'\n    if (lower.includes('reject') || lower.includes('error')) return 'bg-[#FEF2F2] text-[#B91C1C]'\n    return 'bg-[#FFFBEB] text-[#B45309]'\n  }\n\n  return (\n    <div className=\"sticky top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-[#E5E7EB] shadow-sm px-8 py-4 mb-6\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-6\">\n          <div className=\"relative flex items-end gap-3\">\n            <div>\n              <div className=\"text-xs font-semibold text-[#6B7280] uppercase tracking-wider mb-1\">\n                Claim ID\n              </div>\n              {showClaimDropdown && onClaimSelect && processedClaims.length > 0 ? (\n              <div className=\"relative\">\n                <button\n                  type=\"button\"\n                  onClick={() => setDropdownOpen(!dropdownOpen)}\n                  className=\"flex items-center gap-2 min-w-[180px] px-3 py-2 text-left text-lg font-bold text-[#111827] bg-white border border-[#E5E7EB] rounded-lg hover:border-[#6366F1] focus:outline-none focus:ring-2 focus:ring-[#6366F1] focus:ring-offset-1\"\n                >\n                  <span className=\"truncate\">{displayClaimId}</span>\n                  <ChevronDown className={`w-4 h-4 flex-shrink-0 transition-transform ${dropdownOpen ? 'rotate-180' : ''}`} />\n                </button>\n                {dropdownOpen && (\n                  <>\n                    <div className=\"fixed inset-0 z-40\" onClick={() => setDropdownOpen(false)} aria-hidden=\"true\" />\n                    <div className=\"absolute left-0 top-full mt-1 z-50 w-full max-w-md max-h-64 overflow-auto bg-white border border-[#E5E7EB] rounded-lg shadow-lg py-1\">\n                      {processedClaims.map((c) => (\n                        <button\n                          key={c.claimId}\n                          type=\"button\"\n                          onClick={() => {\n                            onClaimSelect(c.claimId)\n                            setDropdownOpen(false)\n                          }}\n                          className={`w-full px-4 py-2.5 text-left text-sm hover:bg-[#F3F4F6] ${\n                            c.claimId === displayClaimId ? 'bg-[#EEF2FF] text-[#4F46E5] font-medium' : 'text-[#374151]'\n                          }`}\n                        >\n                          <div className=\"font-medium truncate\">{c.claimId}</div>\n                          <div className=\"text-xs text-[#6B7280] truncate\">\n                            {[c.policyNumber, c.claimantName].filter(Boolean).join(' • ') || new Date(c.createdAt).toLocaleDateString()}\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  </>\n                )}\n              </div>\n            ) : (\n              <div className=\"text-lg font-bold text-[#111827]\">{displayClaimId}</div>\n            )}\n            </div>\n            {showClaimDropdown && processedClaims.length > 0 && (\n              <a\n                href=\"/api/claims/export\"\n                download=\"claims-history.csv\"\n                className=\"pb-0.5 inline-flex items-center gap-1 text-xs text-[#6366F1] hover:text-[#4F46E5] hover:underline\"\n                title=\"Download claims history CSV\"\n              >\n                <Download className=\"w-3.5 h-3.5\" />\n                Export CSV\n              </a>\n            )}\n          </div>\n          <div className=\"h-12 w-px bg-[#E5E7EB]\" />\n          <div>\n            <div className=\"text-xs font-semibold text-[#6B7280] uppercase tracking-wider mb-1\">\n              Overall Confidence\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"text-lg font-bold text-[#111827]\">{overallConfidence}%</div>\n              <div\n                className={`w-2 h-2 rounded-full ${\n                  overallConfidence >= CONFIDENCE.THRESHOLD_HIGH * 100\n                    ? 'bg-[#10B981]'\n                    : overallConfidence >= CONFIDENCE.THRESHOLD_MEDIUM * 100\n                      ? 'bg-[#3B82F6]'\n                      : 'bg-[#F59E0B]'\n                }`}\n              />\n            </div>\n          </div>\n          <div className=\"h-12 w-px bg-[#E5E7EB]\" />\n          <div>\n            <div className=\"text-xs font-semibold text-[#6B7280] uppercase tracking-wider mb-1\">\n              Status\n            </div>\n            <div\n              className={`inline-flex items-center px-3 py-1 rounded-md text-sm font-medium ${getStatusColor(status)}`}\n            >\n              {status || 'Processing'}\n            </div>\n          </div>\n        </div>\n        {showActions && (onBack || onContinue) && (\n          <div className=\"flex items-center space-x-3\">\n            {onBack && (\n              <button onClick={onBack} className=\"btn-secondary flex items-center space-x-2\">\n                <ArrowLeft className=\"w-4 h-4\" />\n                <span>Back</span>\n              </button>\n            )}\n            {onContinue && (\n              <button onClick={onContinue} className=\"btn-primary flex items-center space-x-2\">\n                <span>{continueLabel}</span>\n                <ArrowRight className=\"w-4 h-4\" />\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1985, "column": 0}, "map": {"version":3,"sources":["file:///Users/pranaynath/Documents/GitHub/fnol/Autonomous-Claims-Orchestrator/components/ReviewPage.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useMemo } from 'react'\nimport { motion } from 'framer-motion'\nimport { \n  FileText, \n  Search, \n  BookOpen, \n  CheckCircle,\n  AlertTriangle,\n  ArrowRight,\n  ArrowLeft,\n  Shield,\n  User,\n  Calendar,\n  MapPin,\n  FileCheck,\n  Clock,\n  TrendingUp,\n  ImageIcon,\n  ChevronDown,\n  ChevronUp\n} from 'lucide-react'\nimport ClaimSummaryBar from './ClaimSummaryBar'\nimport { ClaimData, Document, FieldEvidence, PolicyHit } from '@/types/claims'\nimport { CONFIDENCE } from '@/lib/confidence'\n\n/** Render flat KPI key-values (e.g. from damage photos, water leakage images) */\nfunction ImageKpiContent({ keyFields }: { keyFields: Record<string, unknown> }) {\n  const formatLabel = (key: string) =>\n    key.replace(/_/g, ' ').replace(/([A-Z])/g, ' $1').replace(/^./, (s) => s.toUpperCase()).trim()\n  const entries = Object.entries(keyFields).filter(\n    ([k, v]) => !String(k).startsWith('_') && v != null && v !== ''\n  )\n  if (entries.length === 0) return null\n  return (\n    <div className=\"grid gap-x-4 gap-y-2 text-xs\" style={{ gridTemplateColumns: 'auto 1fr' }}>\n      {entries.map(([k, v]) => (\n        <React.Fragment key={k}>\n          <span className=\"font-medium text-[#6B7280]\">{formatLabel(k)}:</span>\n          <span className=\"text-[#374151] break-words\">{String(v)}</span>\n        </React.Fragment>\n      ))}\n    </div>\n  )\n}\n\n/** Render structured keyFields for any document type (Invoice, Police Report, Repair Estimate, etc.) */\nfunction StructuredDocContent({ doc }: { doc: Document }) {\n  const keyFields = doc.keyFields as Record<string, unknown> | undefined\n  if (!keyFields || Object.keys(keyFields).length === 0) return null\n\n  const formatLabel = (key: string) =>\n    key.replace(/_/g, ' ').replace(/([A-Z])/g, ' $1').replace(/^./, (s) => s.toUpperCase()).trim()\n\n  const renderValue = (val: unknown): React.ReactNode => {\n    if (val == null || val === '') return '—'\n    if (typeof val === 'string') return val\n    if (typeof val === 'number') return String(val)\n    if (Array.isArray(val)) {\n      if (val.length === 0) return '—'\n      return (\n        <ul className=\"list-disc list-inside space-y-0.5 mt-1\">\n          {val.map((item, i) => (\n            <li key={i} className=\"text-[#374151]\">\n              {typeof item === 'object' && item !== null && !Array.isArray(item)\n                ? Object.entries(item as Record<string, unknown>).map(([k, v]) => (\n                    <span key={k} className=\"mr-2\">\n                      <span className=\"font-medium text-[#6B7280]\">{formatLabel(k)}:</span>{' '}\n                      {String(v)}\n                    </span>\n                  ))\n                : String(item)}\n            </li>\n          ))}\n        </ul>\n      )\n    }\n    if (typeof val === 'object' && val !== null) {\n      return (\n        <div className=\"mt-1 space-y-1 pl-2 border-l-2 border-[#E5E7EB]\">\n          {Object.entries(val as Record<string, unknown>).map(([k, v]) => (\n            <div key={k} className=\"text-xs\">\n              <span className=\"font-medium text-[#6B7280]\">{formatLabel(k)}:</span>{' '}\n              <span className=\"text-[#374151]\">{renderValue(v)}</span>\n            </div>\n          ))}\n        </div>\n      )\n    }\n    return String(val)\n  }\n\n  const renderSection = (sectionKey: string, sectionVal: unknown) => {\n    const title = formatLabel(sectionKey)\n    if (Array.isArray(sectionVal) && sectionVal.length > 0) {\n      const first = sectionVal[0]\n      const isTable =\n        typeof first === 'object' && first !== null && !Array.isArray(first)\n      if (isTable) {\n        const keys = Object.keys(first as Record<string, unknown>)\n        return (\n          <div key={sectionKey}>\n            <div className=\"text-xs font-semibold text-[#6366F1] uppercase tracking-wider mb-2\">\n              {title}\n            </div>\n            <div className=\"bg-[#F9FAFB] rounded-lg overflow-hidden\">\n              <table className=\"w-full text-xs\">\n                <thead>\n                  <tr className=\"bg-[#EEF2FF]\">\n                    {keys.map((k) => (\n                      <th\n                        key={k}\n                        className=\"px-3 py-2 text-left font-semibold text-[#4F46E5]\"\n                      >\n                        {formatLabel(k)}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  {sectionVal.map((row: unknown, i: number) => (\n                    <tr key={i} className=\"border-t border-[#E5E7EB]\">\n                      {keys.map((k) => (\n                        <td key={k} className=\"px-3 py-2 text-[#374151]\">\n                          {renderValue((row as Record<string, unknown>)[k])}\n                        </td>\n                      ))}\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )\n      }\n    }\n    return (\n      <div key={sectionKey}>\n        <div className=\"text-xs font-semibold text-[#6366F1] uppercase tracking-wider mb-2\">\n          {title}\n        </div>\n        <div className=\"bg-[#F9FAFB] rounded-lg p-3 text-xs\">\n          {typeof sectionVal === 'object' && sectionVal !== null && !Array.isArray(sectionVal) ? (\n            <div className=\"grid gap-x-4 gap-y-2\" style={{ gridTemplateColumns: 'auto 1fr' }}>\n              {Object.entries(sectionVal as Record<string, unknown>).map(([k, v]) => (\n                <React.Fragment key={k}>\n                  <span className=\"font-medium text-[#6B7280] min-w-0\">\n                    {formatLabel(k)}:\n                  </span>\n                  <span className=\"text-[#374151] break-words\">{renderValue(v)}</span>\n                </React.Fragment>\n              ))}\n            </div>\n          ) : (\n            <span className=\"text-[#374151]\">{renderValue(sectionVal)}</span>\n          )}\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-4 max-h-[400px] overflow-y-auto\">\n      {Object.entries(keyFields).map(([sectionKey, sectionVal]) =>\n        renderSection(sectionKey, sectionVal)\n      )}\n    </div>\n  )\n}\n\ninterface ReviewPageProps {\n  claimData: ClaimData\n  onNextStage: () => void\n  onPreviousStage: () => void\n  onLoadClaim?: (claimId: string) => void\n}\n\n// Group fields by category\nconst categorizeFields = (evidence: FieldEvidence[]) => {\n  const categories = {\n    'Claim Metadata': ['policyId', 'policyNumber', 'claimId'],\n    'Contact Details': ['claimantName', 'contactEmail', 'contactPhone'],\n    'Incident Details': ['lossDate', 'lossType', 'lossLocation', 'location', 'description', 'deductible', 'estimatedAmount']\n  }\n\n  const grouped: Record<string, FieldEvidence[]> = {\n    'Claim Metadata': [],\n    'Contact Details': [],\n    'Incident Details': []\n  }\n\n  evidence.forEach((field) => {\n    const fieldName = (field.fieldName || field.field || '').toLowerCase()\n    let categorized = false\n\n    for (const [category, fields] of Object.entries(categories)) {\n      if (fields.some(f => fieldName.includes(f.toLowerCase()))) {\n        grouped[category].push(field)\n        categorized = true\n        break\n      }\n    }\n\n    if (!categorized) {\n      grouped['Incident Details'].push(field)\n    }\n  })\n\n  return grouped\n}\n\nconst SUMMARY_PREVIEW_LENGTH = 280\n\nexport default function ReviewPage({ claimData, onNextStage, onPreviousStage, onLoadClaim }: ReviewPageProps) {\n  const [selectedField, setSelectedField] = useState<string | null>(null)\n  const [selectedDoc, setSelectedDoc] = useState<string | null>(null)\n  const [expandedDocId, setExpandedDocId] = useState<string | null>(null)\n  const [expandedPolicyIds, setExpandedPolicyIds] = useState<Set<string>>(new Set())\n\n  // Handle null claimData\n  if (!claimData || !claimData.decisionPack) {\n    return (\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"max-w-7xl mx-auto text-center py-12\"\n      >\n        <AlertTriangle className=\"w-16 h-16 text-warning-500 mx-auto mb-4\" />\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">No Claim Data Available</h2>\n        <p className=\"text-gray-600 mb-6\">\n          Please process a claim first before reviewing.\n        </p>\n        <button\n          onClick={onPreviousStage}\n          className=\"btn-primary flex items-center space-x-2 mx-auto\"\n        >\n          <ArrowLeft className=\"w-4 h-4\" />\n          <span>Back to Ingest</span>\n        </button>\n      </motion.div>\n    )\n  }\n\n  const { decisionPack, claimId, status, ingestedClaimId } = claimData\n  const { \n    evidence = [], \n    documents = [], \n    policyGrounding = [],\n    claimDraft\n  } = decisionPack || {}\n\n  // Calculate overall confidence\n  const overallConfidence = useMemo(() => {\n    if (evidence.length === 0) return 0\n    const avg = evidence.reduce((sum, e) => sum + e.confidence, 0) / evidence.length\n    return Math.round(avg * 100)\n  }, [evidence])\n\n  // Group fields by category\n  const groupedFields = useMemo(() => categorizeFields(evidence), [evidence])\n\n  // Policy grounding state\n  const policyState = useMemo(() => {\n    if (policyGrounding.length === 0) {\n      return { type: 'warning', message: 'No policy clauses found', subMessage: 'Proceeding without policy grounding' }\n    }\n    const avgScore = policyGrounding.reduce((sum, p) => sum + (p.score || p.similarity || 0), 0) / policyGrounding.length\n    if (avgScore >= 0.7) {\n      return { type: 'success', message: `${policyGrounding.length} policy matches found`, subMessage: `${Math.round(avgScore * 100)}% average similarity` }\n    }\n    return { type: 'neutral', message: `${policyGrounding.length} policy matches`, subMessage: 'Review recommended' }\n  }, [policyGrounding])\n\n  const getConfidenceBadge = (confidence: number) => {\n    if (confidence >= CONFIDENCE.THRESHOLD_HIGH) {\n      return <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#ECFDF5] text-[#047857] border border-[#A7F3D0]\">High</span>\n    } else if (confidence >= CONFIDENCE.THRESHOLD_MEDIUM) {\n      return <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#EFF6FF] text-[#1E40AF] border border-[#DBEAFE]\">Medium</span>\n    } else {\n      return <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#FFFBEB] text-[#B45309] border border-[#FDE68A]\">Review</span>\n    }\n  }\n\n  const getFieldIcon = (fieldName: string) => {\n    const iconMap: Record<string, any> = {\n      policyId: Shield,\n      policyNumber: Shield,\n      claimantName: User,\n      contactEmail: FileText,\n      contactPhone: FileText,\n      lossDate: Calendar,\n      lossType: FileCheck,\n      lossLocation: MapPin,\n      location: MapPin,\n      description: FileText,\n      deductible: TrendingUp\n    }\n    \n    const field = (fieldName || '').toLowerCase()\n    for (const [key, Icon] of Object.entries(iconMap)) {\n      if (field.includes(key.toLowerCase())) {\n        return Icon\n      }\n    }\n    return FileText\n  }\n\n  const getStatusColor = (status?: string) => {\n    if (!status) return 'bg-[#E5E7EB] text-[#374151]'\n    const s = status.toLowerCase()\n    if (s.includes('complete') || s.includes('approved')) return 'bg-[#ECFDF5] text-[#047857]'\n    if (s.includes('pending') || s.includes('processing')) return 'bg-[#EFF6FF] text-[#1E40AF]'\n    if (s.includes('reject') || s.includes('error')) return 'bg-[#FEF2F2] text-[#B91C1C]'\n    return 'bg-[#FFFBEB] text-[#B45309]'\n  }\n\n  return (\n    <div className=\"max-w-[1920px] mx-auto\">\n      <ClaimSummaryBar\n        claimData={claimData}\n        onBack={onPreviousStage}\n        onContinue={onNextStage}\n        continueLabel=\"Continue\"\n        showClaimDropdown\n        onClaimSelect={onLoadClaim}\n      />\n\n      {/* Main Content - Three Column Layout */}\n      <div className=\"px-8 py-8\">\n        <div className=\"grid grid-cols-12 gap-6\">\n          {/* Left Column - Source Documents (Compact) */}\n          <div className=\"col-span-12 lg:col-span-3\">\n            <motion.div \n              className=\"card p-5 h-fit sticky top-[88px]\"\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n            >\n              <div className=\"flex items-center space-x-2 mb-4\">\n                <FileText className=\"w-4 h-4 text-[#6366F1]\" />\n                <h2 className=\"text-sm font-bold text-[#111827] uppercase tracking-wider\">Source Documents</h2>\n                <span className=\"ml-auto text-xs font-medium text-[#6B7280] bg-[#F3F4F6] px-2 py-0.5 rounded\">\n                  {documents.length}\n                </span>\n              </div>\n              \n              <div className=\"space-y-2\">\n                {documents.map((doc) => {\n                  const isSelected = selectedDoc === doc.id\n                  const isImageDoc =\n                    doc.type === 'DamagePhoto' || doc.mimeType?.startsWith('image/')\n                  const imageUrl =\n                    isImageDoc &&\n                    ingestedClaimId &&\n                    `/api/ingested-claims/${ingestedClaimId}/attachments?name=${encodeURIComponent(doc.name)}`\n\n                  return (\n                    <div\n                      key={doc.id}\n                      className={`rounded-lg border cursor-pointer transition-all overflow-hidden ${\n                        isSelected\n                          ? 'border-[#6366F1] bg-[#EEF2FF] shadow-sm'\n                          : 'border-[#E5E7EB] hover:border-[#CBD5E1] hover:bg-[#F9FAFB] bg-white'\n                      }`}\n                      onClick={() => setSelectedDoc(isSelected ? null : doc.id)}\n                    >\n                      <div className=\"p-3\">\n                        <div className=\"flex items-start justify-between mb-2\">\n                          <div className=\"flex items-center space-x-2 flex-1 min-w-0\">\n                            {isImageDoc ? (\n                              <ImageIcon className=\"w-4 h-4 text-[#6366F1] flex-shrink-0\" />\n                            ) : (\n                              <FileText className=\"w-4 h-4 text-[#6B7280] flex-shrink-0\" />\n                            )}\n                            <span className=\"text-xs font-semibold text-[#111827] truncate\">\n                              {doc.name}\n                            </span>\n                          </div>\n                          <span className=\"text-xs font-medium text-[#6B7280] bg-[#F3F4F6] px-1.5 py-0.5 rounded ml-2 flex-shrink-0\">\n                            {doc.type}\n                          </span>\n                        </div>\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center space-x-1\">\n                            <div\n                              className={`w-1.5 h-1.5 rounded-full ${\n                                doc.confidence >= CONFIDENCE.THRESHOLD_HIGH\n                                  ? 'bg-[#10B981]'\n                                  : doc.confidence >= CONFIDENCE.THRESHOLD_MEDIUM\n                                    ? 'bg-[#3B82F6]'\n                                    : 'bg-[#F59E0B]'\n                              }`}\n                            />\n                            <span className=\"text-xs text-[#6B7280]\">\n                              {Math.round(doc.confidence * 100)}%\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                      {/* Image preview + extracted KPIs for image documents */}\n                      {isImageDoc && isSelected && (\n                        <div className=\"border-t border-[#E5E7EB] bg-white/80 p-3 space-y-3\">\n                          {imageUrl && (\n                            <div className=\"rounded-lg overflow-hidden bg-[#F3F4F6] aspect-video flex items-center justify-center\">\n                              {/* eslint-disable-next-line @next/next/no-img-element */}\n                              <img\n                                src={imageUrl}\n                                alt={doc.name}\n                                className=\"max-w-full max-h-40 object-contain\"\n                                onError={(e) => {\n                                  e.currentTarget.style.display = 'none'\n                                }}\n                              />\n                            </div>\n                          )}\n                          {doc.keyFields &&\n                          Object.keys(doc.keyFields as object).length > 0 ? (\n                            <>\n                              <div className=\"text-xs font-semibold text-[#6B7280] uppercase tracking-wider mb-2\">\n                                Extracted KPIs\n                              </div>\n                              <ImageKpiContent keyFields={doc.keyFields as Record<string, unknown>} />\n                            </>\n                          ) : doc.content ? (\n                            <div>\n                              <div className=\"text-xs font-semibold text-[#6B7280] uppercase tracking-wider mb-1\">\n                                Note\n                              </div>\n                              <p className=\"text-xs text-[#374151] leading-relaxed\">\n                                {doc.content}\n                              </p>\n                            </div>\n                          ) : null}\n                        </div>\n                      )}\n                      {/* Text document content when selected */}\n                      {!isImageDoc && isSelected && (\n                        <div className=\"border-t border-[#E5E7EB] bg-white/80 p-3\">\n                          {doc.keyFields &&\n                          Object.keys(doc.keyFields as object).length > 0 ? (\n                            <>\n                              <div className=\"text-xs font-semibold text-[#6B7280] uppercase tracking-wider mb-2\">\n                                Structured Content\n                              </div>\n                              <StructuredDocContent doc={doc} />\n                            </>\n                          ) : doc.content ? (\n                            <>\n                              <div className=\"text-xs font-semibold text-[#6B7280] uppercase tracking-wider mb-1\">\n                                Content\n                              </div>\n                              <p className=\"text-xs text-[#374151] leading-relaxed\">\n                                {expandedDocId === doc.id\n                                  ? doc.content\n                                  : doc.content.length > SUMMARY_PREVIEW_LENGTH\n                                    ? `${doc.content.slice(0, SUMMARY_PREVIEW_LENGTH).trim()}...`\n                                    : doc.content}\n                              </p>\n                              {doc.content.length > SUMMARY_PREVIEW_LENGTH && (\n                                <button\n                                  type=\"button\"\n                                  onClick={(e) => {\n                                    e.stopPropagation()\n                                    setExpandedDocId(expandedDocId === doc.id ? null : doc.id)\n                                  }}\n                                  className=\"mt-1 text-xs font-medium text-[#6366F1] hover:text-[#4F46E5] hover:underline\"\n                                >\n                                  {expandedDocId === doc.id ? 'View less' : 'View more'}\n                                </button>\n                              )}\n                            </>\n                          ) : (\n                            <p className=\"text-xs text-[#6B7280] italic\">No structured content extracted</p>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  )\n                })}\n              </div>\n            </motion.div>\n          </div>\n\n          {/* Center Column - Extracted Fields (Dominant) */}\n          <div className=\"col-span-12 lg:col-span-6\">\n            <motion.div \n              className=\"card p-6\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n            >\n              <div className=\"flex items-center space-x-2 mb-6\">\n                <Search className=\"w-5 h-5 text-[#6366F1]\" />\n                <h2 className=\"text-base font-bold text-[#111827] uppercase tracking-wider\">Extracted Fields</h2>\n                <span className=\"ml-auto text-xs font-medium text-[#6B7280] bg-[#F3F4F6] px-2 py-0.5 rounded\">\n                  {evidence.length} fields\n                </span>\n              </div>\n\n              {/* Grouped Fields by Category */}\n              <div className=\"space-y-6\">\n                {Object.entries(groupedFields).map(([category, fields]) => {\n                  if (fields.length === 0) return null\n                  \n                  return (\n                    <div key={category} className=\"border-b border-[#E5E7EB] pb-6 last:border-0 last:pb-0\">\n                      <h3 className=\"text-xs font-semibold text-[#6B7280] uppercase tracking-wider mb-4\">\n                        {category}\n                      </h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                        {fields.map((field) => {\n                          const fieldName = field.fieldName || field.field || ''\n                          const fieldKey = (fieldName || (field.field || '')).toLowerCase().replace(/\\s/g, '')\n                          const isLongField = ['description', 'losslocation', 'location', 'details'].includes(fieldKey)\n                          const Icon = getFieldIcon(fieldName)\n                          const isSelected = selectedField === fieldName\n\n                          return (\n                            <div\n                              key={fieldName}\n                              className={`p-4 rounded-lg border transition-all cursor-pointer ${\n                                isLongField ? 'md:col-span-2' : ''\n                              } ${\n                                isSelected\n                                  ? 'border-[#6366F1] bg-[#EEF2FF] shadow-sm'\n                                  : 'border-[#E5E7EB] hover:border-[#CBD5E1] hover:bg-[#F9FAFB] bg-white'\n                              }`}\n                              onClick={() => setSelectedField(isSelected ? null : fieldName)}\n                            >\n                              <div className=\"flex items-start justify-between mb-2\">\n                                <div className=\"flex items-center space-x-2 flex-1 min-w-0\">\n                                  <Icon className=\"w-4 h-4 text-[#6B7280] flex-shrink-0\" />\n                                  <span className=\"text-sm font-medium text-[#111827] capitalize truncate\">\n                                    {fieldName.replace(/([A-Z])/g, ' $1').trim()}\n                                  </span>\n                                </div>\n                                {getConfidenceBadge(field.confidence)}\n                              </div>\n                              \n                              <div\n                                className={`text-sm text-[#374151] font-medium mb-1 break-words ${\n                                  isLongField ? 'line-clamp-6' : 'truncate'\n                                }`}\n                                title={String(field.value)}\n                              >\n                                {String(field.value)}\n                              </div>\n                              \n                              {isSelected && (\n                                <motion.div\n                                  initial={{ opacity: 0, height: 0 }}\n                                  animate={{ opacity: 1, height: 'auto' }}\n                                  className=\"mt-3 pt-3 border-t border-[#E5E7EB]\"\n                                >\n                                  <div className=\"text-xs text-[#6B7280] space-y-1\">\n                                    <div>\n                                      <span className=\"font-medium\">Source:</span>{' '}\n                                      {typeof field.sourceLocator === 'string' \n                                        ? field.sourceLocator \n                                        : field.sourceLocator.docId}\n                                    </div>\n                                    <div>\n                                      <span className=\"font-medium\">Rationale:</span> {field.rationale}\n                                    </div>\n                                  </div>\n                                </motion.div>\n                              )}\n                            </div>\n                          )\n                        })}\n                      </div>\n                    </div>\n                  )\n                })}\n              </div>\n            </motion.div>\n          </div>\n\n          {/* Right Column - Policy Grounding (Narrow) */}\n          <div className=\"col-span-12 lg:col-span-3\">\n            <motion.div \n              className=\"card p-5 h-fit sticky top-[88px]\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n            >\n              <div className=\"flex items-center space-x-2 mb-4\">\n                <BookOpen className=\"w-4 h-4 text-[#6366F1]\" />\n                <h2 className=\"text-sm font-bold text-[#111827] uppercase tracking-wider\">Policy Grounding</h2>\n              </div>\n\n              {/* State-based Policy Card */}\n              <div className={`p-4 rounded-lg border-2 ${\n                policyState.type === 'success' \n                  ? 'border-[#10B981] bg-[#ECFDF5]' \n                  : policyState.type === 'warning'\n                  ? 'border-[#F59E0B] bg-[#FFFBEB]'\n                  : 'border-[#E5E7EB] bg-[#F9FAFB]'\n              }`}>\n                <div className=\"flex items-start space-x-3\">\n                  {policyState.type === 'success' ? (\n                    <CheckCircle className=\"w-5 h-5 text-[#10B981] flex-shrink-0 mt-0.5\" />\n                  ) : policyState.type === 'warning' ? (\n                    <AlertTriangle className=\"w-5 h-5 text-[#F59E0B] flex-shrink-0 mt-0.5\" />\n                  ) : (\n                    <Shield className=\"w-5 h-5 text-[#6B7280] flex-shrink-0 mt-0.5\" />\n                  )}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className={`text-sm font-semibold mb-1 ${\n                      policyState.type === 'success' \n                        ? 'text-[#047857]' \n                        : policyState.type === 'warning'\n                        ? 'text-[#B45309]'\n                        : 'text-[#374151]'\n                    }`}>\n                      {policyState.message}\n                    </div>\n                    <div className={`text-xs ${\n                      policyState.type === 'success' \n                        ? 'text-[#065F46]' \n                        : policyState.type === 'warning'\n                        ? 'text-[#92400E]'\n                        : 'text-[#6B7280]'\n                    }`}>\n                      {policyState.subMessage}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Policy Matches List – expandable */}\n              {policyGrounding.length > 0 && (\n                <div className=\"mt-4 space-y-2\">\n                  <div className=\"text-xs font-semibold text-[#6B7280] uppercase tracking-wider mb-2\">\n                    Matches ({policyGrounding.length})\n                  </div>\n                  {policyGrounding.map((policy) => {\n                    const isExpanded = expandedPolicyIds.has(policy.clauseId)\n                    const fullContent = policy.content || policy.snippet || ''\n                    const toggle = () => {\n                      setExpandedPolicyIds((prev) => {\n                        const next = new Set(prev)\n                        if (next.has(policy.clauseId)) next.delete(policy.clauseId)\n                        else next.add(policy.clauseId)\n                        return next\n                      })\n                    }\n                    return (\n                      <div\n                        key={policy.clauseId}\n                        className=\"rounded-lg border border-[#E5E7EB] bg-white hover:border-[#CBD5E1] overflow-hidden\"\n                      >\n                        <button\n                          type=\"button\"\n                          onClick={toggle}\n                          className=\"w-full p-3 text-left hover:bg-[#F9FAFB] transition-colors focus:outline-none focus:ring-2 focus:ring-[#6366F1]/20 focus:ring-inset\"\n                        >\n                          <div className=\"flex items-start justify-between gap-2\">\n                            <div className=\"min-w-0 flex-1\">\n                              <div className=\"flex items-center gap-2 mb-1\">\n                                <span className=\"text-xs font-semibold text-[#111827]\">{policy.clauseId}</span>\n                                <span className=\"text-xs font-medium text-[#10B981] bg-[#ECFDF5] px-1.5 py-0.5 rounded flex-shrink-0\">\n                                  {Math.round((policy.score || policy.similarity || 0) * 100)}%\n                                </span>\n                                {policy.sourceRef && (\n                                  <span className=\"text-[10px] text-[#9CA3AF]\">{policy.sourceRef}</span>\n                                )}\n                              </div>\n                              <div className=\"text-xs text-[#374151] font-medium mb-0.5\">\n                                {policy.title}\n                              </div>\n                              {policy.section && (\n                                <div className=\"text-[11px] text-[#6366F1] mb-1\">\n                                  {policy.section}\n                                </div>\n                              )}\n                              <div className={`text-xs text-[#6B7280] ${!isExpanded ? 'line-clamp-2' : 'line-clamp-1'}`}>\n                                {policy.snippet || fullContent.slice(0, 140) + (fullContent.length > 140 ? '...' : '')}\n                              </div>\n                              <span className=\"text-[10px] text-[#6366F1] font-medium mt-1 block\">\n                                {isExpanded ? 'Click to collapse' : 'Click to read full clause'}\n                              </span>\n                            </div>\n                            <span className=\"flex-shrink-0 text-[#9CA3AF]\" aria-hidden>\n                              {isExpanded ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />}\n                            </span>\n                          </div>\n                        </button>\n                        {isExpanded && fullContent && (\n                          <div className=\"px-3 pb-3 pt-0 border-t border-[#F3F4F6] bg-[#FAFAFA]\">\n                            <div className=\"text-xs text-[#4B5563] leading-relaxed whitespace-pre-wrap\">\n                              {fullContent}\n                            </div>\n                            <p className=\"text-[10px] text-[#9CA3AF] mt-2 italic\">{policy.rationale}</p>\n                          </div>\n                        )}\n                      </div>\n                    )\n                  })}\n                </div>\n              )}\n            </motion.div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3398, "column": 0}, "map": {"version":3,"sources":["file:///Users/pranaynath/Documents/GitHub/fnol/Autonomous-Claims-Orchestrator/components/DecisionPage.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { motion } from 'framer-motion'\nimport { \n  CheckCircle, \n  FileText, \n  Send, \n  Download, \n  Clock,\n  ArrowRight,\n  ArrowLeft,\n  AlertTriangle,\n  Check,\n  X,\n  ChevronDown,\n  ChevronUp\n} from 'lucide-react'\nimport ClaimSummaryBar from './ClaimSummaryBar'\nimport { ClaimData } from '@/types/claims'\nimport { CONFIDENCE } from '@/lib/confidence'\n\ninterface DecisionPageProps {\n  claimData: ClaimData\n  onNextStage: () => void\n  onPreviousStage: () => void\n  onLoadClaim?: (claimId: string) => void\n}\n\nexport default function DecisionPage({ claimData, onNextStage, onPreviousStage, onLoadClaim }: DecisionPageProps) {\n  const [isCreatingDraft, setIsCreatingDraft] = useState(false)\n  const [isSendingAck, setIsSendingAck] = useState(false)\n  const [draftCreated, setDraftCreated] = useState(false)\n  const [ackSent, setAckSent] = useState(false)\n  const [showAcknowledgment, setShowAcknowledgment] = useState(false)\n  const [expandedPolicyIds, setExpandedPolicyIds] = useState<Set<string>>(new Set())\n\n  // Handle null claimData\n  if (!claimData || !claimData.decisionPack) {\n    return (\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"max-w-7xl mx-auto text-center py-12\"\n      >\n        <AlertTriangle className=\"w-16 h-16 text-warning-500 mx-auto mb-4\" />\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">No Claim Data Available</h2>\n        <p className=\"text-gray-600 mb-6\">\n          Please process a claim first before making decisions.\n        </p>\n        <button\n          onClick={onPreviousStage}\n          className=\"btn-primary flex items-center space-x-2 mx-auto\"\n        >\n          <ArrowLeft className=\"w-4 h-4\" />\n          <span>Back to Review</span>\n        </button>\n      </motion.div>\n    )\n  }\n\n  const { decisionPack, processingTime } = claimData\n  const { \n    claimDraft, \n    evidence = [], \n    documents = [], \n    policyGrounding = [], \n    audit = [] \n  } = decisionPack || {}\n\n  const handleCreateDraft = async () => {\n    setIsCreatingDraft(true)\n    \n    // Simulate API call\n    await new Promise(resolve => setTimeout(resolve, 2000))\n    \n    setDraftCreated(true)\n    setIsCreatingDraft(false)\n  }\n\n  const handleSendAcknowledgment = async () => {\n    setIsSendingAck(true)\n    \n    // Simulate API call\n    await new Promise(resolve => setTimeout(resolve, 1500))\n    \n    setAckSent(true)\n    setIsSendingAck(false)\n    setShowAcknowledgment(true)\n  }\n\n  const generateAcknowledgment = () => {\n    const { claimantName, lossDate, lossType, policyId } = claimDraft || {}\n    const policyInfo = policyGrounding.length > 0 \n      ? `Based on your policy coverage, this appears to be a covered loss.` \n      : `We're reviewing your policy to determine coverage.`\n    \n    return `Dear ${claimantName},\n\nThank you for reporting your claim. We have received your First Notice of Loss for the incident that occurred on ${lossDate}.\n\n${policyInfo}\n\nYour claim has been assigned claim number: ${claimData.claimId || claimDraft?.policyNumber || 'N/A'}\n\nWhat happens next:\n1. Our team will review the submitted documents and information\n2. We'll contact you within 24 hours to discuss next steps\n3. If you have any questions, please call our claims hotline\n\nWe appreciate your patience and will work to resolve your claim as quickly as possible.\n\nBest regards,\nClaims Team`\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"max-w-6xl mx-auto\"\n    >\n      <ClaimSummaryBar\n        claimData={claimData}\n        onBack={onPreviousStage}\n        onContinue={onNextStage}\n        continueLabel=\"Continue\"\n        showClaimDropdown\n        onClaimSelect={onLoadClaim}\n      />\n      {/* Header */}\n      <div className=\"text-center mb-12\">\n        <h1 className=\"text-4xl font-bold bg-gradient-to-r from-[#2D3748] via-[#4A5568] to-[#2D3748] bg-clip-text text-transparent mb-4\">\n          Decision & Actions\n        </h1>\n        <p className=\"text-lg text-[#718096] max-w-2xl mx-auto\">\n          Review the assembled claim draft and take action\n        </p>\n      </div>\n\n      <div className=\"grid lg:grid-cols-2 gap-8\">\n        {/* Decision Pack */}\n        <motion.div \n          className=\"card p-6\"\n          initial={{ opacity: 0, x: -20 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ delay: 0.1 }}\n        >\n          <div className=\"flex items-center space-x-3 mb-6\">\n            <div className=\"p-2 bg-gradient-to-br from-sky-100 to-sky-200 rounded-lg\">\n              <CheckCircle className=\"w-5 h-5 text-sky-600\" />\n            </div>\n            <h2 className=\"text-xl font-bold text-[#2D3748]\">Decision Pack</h2>\n          </div>\n          \n          <div className=\"space-y-4\">\n            {/* Claim Summary */}\n            <div className=\"p-5 bg-gradient-to-br from-sky-50 to-sky-100 rounded-xl border-l-4 border-sky-400 shadow-sm\">\n              <h3 className=\"font-semibold text-[#0369A1] mb-3\">Claim Summary</h3>\n              <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                <div><span className=\"font-medium\">Policy:</span> {claimDraft.policyNumber || claimDraft.policyId || '—'}</div>\n                <div><span className=\"font-medium\">Claimant:</span> {claimDraft.claimantName || '—'}</div>\n                <div><span className=\"font-medium\">Loss Date:</span> {claimDraft.lossDate || '—'}</div>\n                <div><span className=\"font-medium\">Type:</span> {claimDraft.lossType || '—'}</div>\n                <div><span className=\"font-medium\">Location:</span> {claimDraft.lossLocation || claimDraft.location || claimDraft.propertyAddress || '—'}</div>\n                {claimDraft.deductible && (\n                  <div><span className=\"font-medium\">Deductible:</span> ${claimDraft.deductible}</div>\n                )}\n              </div>\n            </div>\n\n            {/* Evidence Summary */}\n            <div className=\"p-5 bg-gradient-to-br from-[#ECFDF5] to-[#D1FAE5] rounded-xl border-l-4 border-[#22C55E] shadow-sm\">\n              <h3 className=\"font-semibold text-[#047857] mb-3\">Evidence Summary</h3>\n              <div className=\"text-sm text-[#065F46]\">\n                <div className=\"mb-2\">\n                  <span className=\"font-medium\">Documents:</span> {documents.length} attached\n                </div>\n                <div className=\"mb-2\">\n                  <span className=\"font-medium\">Fields Extracted:</span> {evidence.length} total\n                </div>\n                <div>\n                  <span className=\"font-medium\">High Confidence:</span> {evidence.filter(e => e.confidence >= CONFIDENCE.THRESHOLD_HIGH).length} fields\n                </div>\n              </div>\n            </div>\n\n            {/* Policy Grounding – expandable clauses */}\n            {policyGrounding.length > 0 && (\n              <div className=\"p-5 bg-gradient-to-br from-sky-50 to-sky-100 rounded-xl border-l-4 border-sky-400 shadow-sm\">\n                <h3 className=\"font-semibold text-[#0369A1] mb-3\">Policy Grounding</h3>\n                <div className=\"text-sm text-[#075985] mb-3\">\n                  <div className=\"mb-1\">\n                    <span className=\"font-medium\">Clauses Found:</span> {policyGrounding.length}\n                  </div>\n                  <div>\n                    <span className=\"font-medium\">Coverage:</span> {claimDraft.coverageFound ? 'Confirmed' : 'Under Review'}\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  {policyGrounding.map((policy) => {\n                    const isExpanded = expandedPolicyIds.has(policy.clauseId)\n                    const fullContent = policy.content || policy.snippet || ''\n                    const toggle = () => {\n                      setExpandedPolicyIds((prev) => {\n                        const next = new Set(prev)\n                        if (next.has(policy.clauseId)) next.delete(policy.clauseId)\n                        else next.add(policy.clauseId)\n                        return next\n                      })\n                    }\n                    return (\n                      <div key={policy.clauseId} className=\"rounded-lg border border-sky-200 bg-white overflow-hidden\">\n                        <button\n                          type=\"button\"\n                          onClick={toggle}\n                          className=\"w-full p-3 text-left hover:bg-sky-50/50 transition-colors focus:outline-none focus:ring-2 focus:ring-sky-200\"\n                        >\n                          <div className=\"flex items-start justify-between gap-2\">\n                            <div className=\"min-w-0 flex-1\">\n                              <div className=\"flex items-center gap-2 mb-0.5\">\n                                <span className=\"text-xs font-semibold text-[#0C4A6E]\">{policy.clauseId}</span>\n                                <span className=\"text-xs font-medium text-[#047857] bg-[#ECFDF5] px-1.5 py-0.5 rounded\">\n                                  {Math.round((policy.score || policy.similarity || 0) * 100)}%\n                                </span>\n                              </div>\n                              <div className=\"text-xs text-[#0C4A6E] font-medium line-clamp-1\">\n                                {policy.title}\n                              </div>\n                              <div className=\"text-[11px] text-[#0369A1] line-clamp-1 mt-0.5\">\n                                {policy.snippet || fullContent.slice(0, 100) + '...'}\n                              </div>\n                            </div>\n                            <span className=\"flex-shrink-0 text-sky-400\">\n                              {isExpanded ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />}\n                            </span>\n                          </div>\n                        </button>\n                        {isExpanded && fullContent && (\n                          <div className=\"px-3 pb-3 pt-0 border-t border-sky-100 bg-sky-50/30\">\n                            <div className=\"text-xs text-[#0C4A6E] leading-relaxed whitespace-pre-wrap\">\n                              {fullContent}\n                            </div>\n                            {policy.rationale && (\n                              <p className=\"text-[10px] text-sky-600 mt-2 italic\">{policy.rationale}</p>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    )\n                  })}\n                </div>\n              </div>\n            )}\n\n            {/* Processing Metrics */}\n            <div className=\"p-5 bg-gradient-to-br from-cloud-50 to-cloud-100 rounded-xl border border-cloud-200 shadow-sm\">\n              <h3 className=\"font-semibold text-[#2D3748] mb-3\">Processing Metrics</h3>\n              <div className=\"text-sm text-[#4A5568]\">\n                <div className=\"mb-1\">\n                  <span className=\"font-medium\">Total Time:</span> {((processingTime || 2000) / 1000).toFixed(1)}s\n                </div>\n                <div className=\"mb-1\">\n                  <span className=\"font-medium\">Auto-population:</span> {(((claimData.autoPopulatedFields || 8) / (claimData.totalFields || 10)) * 100).toFixed(0)}%\n                </div>\n                <div>\n                  <span className=\"font-medium\">RAG Hit Rate:</span> {((claimData.ragHitRate || 1) * 100).toFixed(0)}%\n                </div>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n\n        {/* Actions */}\n        <motion.div \n          className=\"card p-6\"\n          initial={{ opacity: 0, x: 20 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ delay: 0.2 }}\n        >\n          <div className=\"flex items-center space-x-3 mb-6\">\n            <div className=\"p-2 bg-gradient-to-br from-sky-100 to-sky-200 rounded-lg\">\n              <FileText className=\"w-5 h-5 text-sky-600\" />\n            </div>\n            <h2 className=\"text-xl font-bold text-[#2D3748]\">Actions</h2>\n          </div>\n          \n          <div className=\"space-y-4\">\n            {/* Create Draft in Core */}\n            <div className=\"p-5 border-2 border-cloud-200 rounded-xl bg-white hover:shadow-md transition-shadow\">\n              <h3 className=\"font-semibold text-[#2D3748] mb-2\">Create Draft in Core System</h3>\n              <p className=\"text-sm text-[#718096] mb-4\">\n                Send the assembled claim data to the core claims management system\n              </p>\n              \n              {!draftCreated ? (\n                <button\n                  onClick={handleCreateDraft}\n                  disabled={isCreatingDraft}\n                  className=\"btn-primary w-full disabled:opacity-50\"\n                >\n                  {isCreatingDraft ? (\n                    <div className=\"flex items-center justify-center space-x-2\">\n                      <Clock className=\"w-4 h-4 animate-spin\" />\n                      <span>Creating Draft...</span>\n                    </div>\n                  ) : (\n                    <span>Create Draft in Core</span>\n                  )}\n                </button>\n              ) : (\n                <div className=\"flex items-center space-x-2 text-success-600\">\n                  <Check className=\"w-5 h-5\" />\n                  <span className=\"font-medium\">Draft Created Successfully</span>\n                </div>\n              )}\n            </div>\n\n            {/* Send Acknowledgment */}\n            <div className=\"p-5 border-2 border-cloud-200 rounded-xl bg-white hover:shadow-md transition-shadow\">\n              <h3 className=\"font-semibold text-[#2D3748] mb-2\">Send Customer Acknowledgment</h3>\n              <p className=\"text-sm text-[#718096] mb-4\">\n                Generate and send a personalized acknowledgment email to the claimant\n              </p>\n              \n              {!ackSent ? (\n                <button\n                  onClick={handleSendAcknowledgment}\n                  disabled={isSendingAck || !draftCreated}\n                  className=\"btn-secondary w-full disabled:opacity-50\"\n                >\n                  {isSendingAck ? (\n                    <div className=\"flex items-center justify-center space-x-2\">\n                      <Clock className=\"w-4 h-4 animate-spin\" />\n                      <span>Sending...</span>\n                    </div>\n                  ) : (\n                    <span>Send Acknowledgment</span>\n                  )}\n                </button>\n              ) : (\n                <div className=\"flex items-center space-x-2 text-success-600\">\n                  <Check className=\"w-5 h-5\" />\n                  <span className=\"font-medium\">Acknowledgment Sent</span>\n                </div>\n              )}\n            </div>\n\n            {/* Download Decision Pack */}\n            <div className=\"p-5 border-2 border-cloud-200 rounded-xl bg-white hover:shadow-md transition-shadow\">\n              <h3 className=\"font-semibold text-[#2D3748] mb-2\">Download Decision Pack</h3>\n              <p className=\"text-sm text-[#718096] mb-4\">\n                Download a complete record of the decision pack for audit purposes\n              </p>\n              \n              <button className=\"btn-secondary w-full flex items-center justify-center space-x-2\">\n                <Download className=\"w-4 h-4\" />\n                <span>Download PDF</span>\n              </button>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Acknowledgment Preview */}\n      {showAcknowledgment && (\n        <motion.div \n          className=\"mt-8 card p-6\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n        >\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold\">Customer Acknowledgment</h3>\n            <button\n              onClick={() => setShowAcknowledgment(false)}\n              className=\"text-gray-500 hover:text-gray-700\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n          \n          <div className=\"bg-gray-50 p-4 rounded-lg\">\n            <pre className=\"text-sm text-gray-800 whitespace-pre-wrap font-mono\">\n              {generateAcknowledgment()}\n            </pre>\n          </div>\n          \n          <div className=\"mt-4 text-sm text-gray-600\">\n            <p><span className=\"font-medium\">Note:</span> This acknowledgment is grounded in the extracted claim facts and policy clauses, ensuring accuracy and compliance.</p>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Audit Timeline */}\n      <motion.div \n        className=\"mt-8 card p-6\"\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.3 }}\n      >\n        <h3 className=\"text-lg font-semibold mb-4\">Audit Timeline</h3>\n        <div className=\"space-y-3\">\n          {audit.map((event, index) => (\n            <div key={index} className=\"flex items-center space-x-3\">\n              <div className={`w-3 h-3 rounded-full ${\n                event.success ? 'bg-success-500' : 'bg-danger-500'\n              }`}></div>\n              <div className=\"flex-1\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"font-medium text-gray-900\">{event.step}</span>\n                  <span className=\"text-sm text-gray-500\">{event.duration}ms</span>\n                </div>\n                <div className=\"text-sm text-gray-600\">\n                  {new Date(event.timestamp).toLocaleTimeString()} - {event.modelVersion}\n                  {event.fallbackUsed && (\n                    <span className=\"text-warning-600 ml-2\">(Fallback used)</span>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </motion.div>\n\n      {/* Navigation */}\n      <div className=\"flex justify-between mt-8\">\n        <button\n          onClick={onPreviousStage}\n          className=\"btn-secondary flex items-center space-x-2\"\n        >\n          <ArrowLeft className=\"w-4 h-4\" />\n          <span>Back to Review</span>\n        </button>\n        \n        <button\n          onClick={onNextStage}\n          className=\"btn-primary flex items-center space-x-2\"\n        >\n          <span>View Dashboard</span>\n          <ArrowRight className=\"w-4 h-4\" />\n        </button>\n      </div>\n    </motion.div>\n  )\n} "],"names":[],"mappings":"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"}},
    {"offset": {"line": 4718, "column": 0}, "map": {"version":3,"sources":["file:///Users/pranaynath/Documents/GitHub/fnol/Autonomous-Claims-Orchestrator/components/DashboardPage.tsx"],"sourcesContent":["'use client'\n\nimport { \n  Clock, \n  CheckCircle, \n  AlertTriangle,\n  TrendingUp,\n  RefreshCw,\n  Download\n} from 'lucide-react'\nimport ClaimSummaryBar from './ClaimSummaryBar'\nimport { ClaimData } from '@/types/claims'\nimport { CONFIDENCE } from '@/lib/confidence'\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar, PieChart, Pie, Cell, Legend } from 'recharts'\n\ninterface DashboardPageProps {\n  claimData: ClaimData\n  onReset: () => void\n}\n\nexport default function DashboardPage({ claimData, onReset }: DashboardPageProps) {\n  // Handle null claimData\n  if (!claimData || !claimData.decisionPack) {\n    return (\n      <div className=\"max-w-7xl mx-auto text-center py-16\">\n        <AlertTriangle className=\"w-12 h-12 text-[#9CA3AF] mx-auto mb-4\" />\n        <h2 className=\"text-2xl font-semibold text-[#111827] mb-2\">No Claim Data Available</h2>\n        <p className=\"text-[#6B7280] mb-8\">\n          Please process a claim first to view the dashboard.\n        </p>\n        <button\n          onClick={onReset}\n          className=\"btn-primary inline-flex items-center space-x-2\"\n        >\n          <RefreshCw className=\"w-4 h-4\" />\n          <span>Process New Claim</span>\n        </button>\n      </div>\n    )\n  }\n\n  const { \n    decisionPack, \n    processingTime = 2000, \n    autoPopulatedFields = 8, \n    totalFields = 10, \n    ragHitRate = 1, \n    overrideRate = 0.1 \n  } = claimData\n  const { \n    evidence = [], \n    documents = [], \n    policyGrounding = [], \n    audit = [] \n  } = decisionPack || {}\n\n  // Simulate historical data for charts\n  const historicalData = [\n    { date: '12/10', handleTime: 45, autoPop: 78, override: 12 },\n    { date: '12/11', handleTime: 42, autoPop: 82, override: 8 },\n    { date: '12/12', handleTime: 38, autoPop: 85, override: 6 },\n    { date: '12/13', handleTime: 41, autoPop: 80, override: 10 },\n    { date: '12/14', handleTime: 35, autoPop: 88, override: 5 },\n    { date: '12/15', handleTime: processingTime / 1000, autoPop: (autoPopulatedFields / totalFields) * 100, override: overrideRate * 100 }\n  ]\n\n  const confidenceData = [\n    { name: `High (≥${Math.round(CONFIDENCE.THRESHOLD_HIGH * 100)}%)`, value: evidence.filter(e => e.confidence >= CONFIDENCE.THRESHOLD_HIGH).length, color: '#2563EB' },\n    { name: `Medium (${Math.round(CONFIDENCE.THRESHOLD_MEDIUM * 100)}-${Math.round(CONFIDENCE.THRESHOLD_HIGH * 100) - 1}%)`, value: evidence.filter(e => e.confidence >= CONFIDENCE.THRESHOLD_MEDIUM && e.confidence < CONFIDENCE.THRESHOLD_HIGH).length, color: '#93C5FD' },\n    { name: `Low (<${Math.round(CONFIDENCE.THRESHOLD_MEDIUM * 100)}%)`, value: evidence.filter(e => e.confidence < CONFIDENCE.THRESHOLD_MEDIUM).length, color: '#DBEAFE' }\n  ]\n\n  const documentTypeData = documents.map(doc => ({\n    name: doc.type,\n    value: 1,\n    color: '#2563EB'\n  }))\n\n  const averageHandleTime = historicalData.reduce((sum, item) => sum + item.handleTime, 0) / historicalData.length\n  const averageAutoPop = historicalData.reduce((sum, item) => sum + item.autoPop, 0) / historicalData.length\n  const averageOverride = historicalData.reduce((sum, item) => sum + item.override, 0) / historicalData.length\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      <ClaimSummaryBar claimData={claimData} showActions={false} />\n      {/* Page Title */}\n      <div className=\"mb-16\">\n        <h1 className=\"text-3xl font-semibold text-[#111827] mb-2\">\n          Operations Dashboard\n        </h1>\n        <p className=\"text-sm text-[#6B7280]\">\n          Performance metrics and operational insights\n        </p>\n      </div>\n\n      {/* KPI Cards */}\n      <div className=\"grid md:grid-cols-4 gap-6 mb-16\">\n        <div className=\"card p-6 h-full\">\n          <div className=\"flex items-start justify-between mb-4\">\n            <Clock className=\"w-5 h-5 text-[#9CA3AF] flex-shrink-0 mt-1\" />\n          </div>\n          <p className=\"text-xs font-medium text-[#6B7280] uppercase tracking-wider mb-2\">\n            Avg Handle Time\n          </p>\n          <p className=\"text-3xl font-semibold text-[#111827] mb-3\">\n            {averageHandleTime.toFixed(1)}s\n          </p>\n          <p className=\"text-xs text-[#6B7280]\">\n            ↓ 12% from last week\n          </p>\n        </div>\n\n        <div className=\"card p-6 h-full\">\n          <div className=\"flex items-start justify-between mb-4\">\n            <CheckCircle className=\"w-5 h-5 text-[#9CA3AF] flex-shrink-0 mt-1\" />\n          </div>\n          <p className=\"text-xs font-medium text-[#6B7280] uppercase tracking-wider mb-2\">\n            Auto-population\n          </p>\n          <p className=\"text-3xl font-semibold text-[#111827] mb-3\">\n            {averageAutoPop.toFixed(0)}%\n          </p>\n          <p className=\"text-xs text-[#6B7280]\">\n            ↑ 8% from last week\n          </p>\n        </div>\n\n        <div className=\"card p-6 h-full\">\n          <div className=\"flex items-start justify-between mb-4\">\n            <AlertTriangle className=\"w-5 h-5 text-[#9CA3AF] flex-shrink-0 mt-1\" />\n          </div>\n          <p className=\"text-xs font-medium text-[#6B7280] uppercase tracking-wider mb-2\">\n            Override Rate\n          </p>\n          <p className=\"text-3xl font-semibold text-[#111827] mb-3\">\n            {averageOverride.toFixed(1)}%\n          </p>\n          <p className=\"text-xs text-[#6B7280]\">\n            ↓ 3% from last week\n          </p>\n        </div>\n\n        <div className=\"card p-6 h-full\">\n          <div className=\"flex items-start justify-between mb-4\">\n            <TrendingUp className=\"w-5 h-5 text-[#9CA3AF] flex-shrink-0 mt-1\" />\n          </div>\n          <p className=\"text-xs font-medium text-[#6B7280] uppercase tracking-wider mb-2\">\n            RAG Hit Rate\n          </p>\n          <p className=\"text-3xl font-semibold text-[#111827] mb-3\">\n            {(ragHitRate * 100).toFixed(0)}%\n          </p>\n          <p className=\"text-xs text-[#6B7280]\">\n            ↑ 15% from last week\n          </p>\n        </div>\n      </div>\n\n      {/* Charts */}\n      <div className=\"grid lg:grid-cols-2 gap-6 mb-16\">\n        {/* Handle Time Trend */}\n        <div className=\"card p-6\">\n          <h3 className=\"text-sm font-semibold text-[#111827] mb-6\">Handle Time Trend</h3>\n          <ResponsiveContainer width=\"100%\" height={280}>\n            <LineChart data={historicalData}>\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#F3F4F6\" />\n              <XAxis \n                dataKey=\"date\" \n                stroke=\"#9CA3AF\"\n                tick={{ fill: '#6B7280', fontSize: 12 }}\n                axisLine={{ stroke: '#E5E7EB' }}\n              />\n              <YAxis \n                stroke=\"#9CA3AF\"\n                tick={{ fill: '#6B7280', fontSize: 12 }}\n                axisLine={{ stroke: '#E5E7EB' }}\n              />\n              <Tooltip \n                contentStyle={{ \n                  backgroundColor: '#FFFFFF', \n                  border: '1px solid #E5E7EB',\n                  borderRadius: '6px',\n                  fontSize: '12px'\n                }}\n              />\n              <Line \n                type=\"monotone\" \n                dataKey=\"handleTime\" \n                stroke=\"#2563EB\" \n                strokeWidth={2}\n                dot={{ fill: '#2563EB', r: 3 }}\n                activeDot={{ r: 5 }}\n              />\n            </LineChart>\n          </ResponsiveContainer>\n        </div>\n\n        {/* Auto-population vs Override */}\n        <div className=\"card p-6\">\n          <h3 className=\"text-sm font-semibold text-[#111827] mb-6\">Auto-population vs Override</h3>\n          <ResponsiveContainer width=\"100%\" height={280}>\n            <BarChart data={historicalData}>\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#F3F4F6\" />\n              <XAxis \n                dataKey=\"date\" \n                stroke=\"#9CA3AF\"\n                tick={{ fill: '#6B7280', fontSize: 12 }}\n                axisLine={{ stroke: '#E5E7EB' }}\n              />\n              <YAxis \n                stroke=\"#9CA3AF\"\n                tick={{ fill: '#6B7280', fontSize: 12 }}\n                axisLine={{ stroke: '#E5E7EB' }}\n              />\n              <Tooltip \n                contentStyle={{ \n                  backgroundColor: '#FFFFFF', \n                  border: '1px solid #E5E7EB',\n                  borderRadius: '6px',\n                  fontSize: '12px'\n                }}\n              />\n              <Legend \n                wrapperStyle={{ fontSize: '12px', color: '#6B7280' }}\n                iconType=\"square\"\n              />\n              <Bar dataKey=\"autoPop\" fill=\"#2563EB\" name=\"Auto-population\" radius={[4, 4, 0, 0]} />\n              <Bar dataKey=\"override\" fill=\"#DBEAFE\" name=\"Override\" radius={[4, 4, 0, 0]} />\n            </BarChart>\n          </ResponsiveContainer>\n        </div>\n      </div>\n\n      {/* Detailed Metrics */}\n      <div className=\"grid lg:grid-cols-3 gap-6 mb-16\">\n        {/* Field Confidence Distribution */}\n        <div className=\"card p-6\">\n          <h3 className=\"text-sm font-semibold text-[#111827] mb-6\">Field Confidence Distribution</h3>\n          <ResponsiveContainer width=\"100%\" height={240}>\n            <PieChart>\n              <Pie\n                data={confidenceData}\n                cx=\"50%\"\n                cy=\"50%\"\n                labelLine={false}\n                label={({ name, percent }) => `${(percent * 100).toFixed(0)}%`}\n                outerRadius={70}\n                fill=\"#2563EB\"\n                dataKey=\"value\"\n              >\n                {confidenceData.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={entry.color} />\n                ))}\n              </Pie>\n              <Tooltip \n                contentStyle={{ \n                  backgroundColor: '#FFFFFF', \n                  border: '1px solid #E5E7EB',\n                  borderRadius: '6px',\n                  fontSize: '12px'\n                }}\n              />\n              <Legend \n                wrapperStyle={{ fontSize: '12px', color: '#6B7280' }}\n                iconType=\"circle\"\n              />\n            </PieChart>\n          </ResponsiveContainer>\n        </div>\n\n        {/* Document Types */}\n        <div className=\"card p-6\">\n          <h3 className=\"text-sm font-semibold text-[#111827] mb-6\">Document Types Processed</h3>\n          <ResponsiveContainer width=\"100%\" height={240}>\n            <PieChart>\n              <Pie\n                data={documentTypeData}\n                cx=\"50%\"\n                cy=\"50%\"\n                labelLine={false}\n                label={({ name }) => name}\n                outerRadius={70}\n                fill=\"#2563EB\"\n                dataKey=\"value\"\n              >\n                {documentTypeData.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={entry.color} />\n                ))}\n              </Pie>\n              <Tooltip \n                contentStyle={{ \n                  backgroundColor: '#FFFFFF', \n                  border: '1px solid #E5E7EB',\n                  borderRadius: '6px',\n                  fontSize: '12px'\n                }}\n              />\n            </PieChart>\n          </ResponsiveContainer>\n        </div>\n\n        {/* Current Claim Summary */}\n        <div className=\"card p-6\">\n          <h3 className=\"text-sm font-semibold text-[#111827] mb-6\">Current Claim Summary</h3>\n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center py-2 border-b border-[#F3F4F6]\">\n              <span className=\"text-sm text-[#6B7280]\">Processing Time</span>\n              <span className=\"text-sm font-semibold text-[#111827]\">{(processingTime / 1000).toFixed(1)}s</span>\n            </div>\n            <div className=\"flex justify-between items-center py-2 border-b border-[#F3F4F6]\">\n              <span className=\"text-sm text-[#6B7280]\">Fields Extracted</span>\n              <span className=\"text-sm font-semibold text-[#111827]\">{totalFields}</span>\n            </div>\n            <div className=\"flex justify-between items-center py-2 border-b border-[#F3F4F6]\">\n              <span className=\"text-sm text-[#6B7280]\">High Confidence</span>\n              <span className=\"text-sm font-semibold text-[#111827]\">{autoPopulatedFields}</span>\n            </div>\n            <div className=\"flex justify-between items-center py-2 border-b border-[#F3F4F6]\">\n              <span className=\"text-sm text-[#6B7280]\">Policy Matches</span>\n              <span className=\"text-sm font-semibold text-[#111827]\">{policyGrounding.length}</span>\n            </div>\n            <div className=\"flex justify-between items-center py-2\">\n              <span className=\"text-sm text-[#6B7280]\">Documents</span>\n              <span className=\"text-sm font-semibold text-[#111827]\">{documents.length}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Governance & Compliance */}\n      <div className=\"card p-8 mb-12\">\n        <h3 className=\"text-sm font-semibold text-[#111827] mb-8\">\n          Governance & Compliance\n        </h3>\n        \n        <div className=\"grid md:grid-cols-2 gap-12\">\n          <div>\n            <h4 className=\"text-xs font-medium text-[#6B7280] uppercase tracking-wider mb-4\">\n              Human-in-the-Loop Policy\n            </h4>\n            <ul className=\"text-sm text-[#374151] space-y-3\">\n              <li className=\"flex items-start\">\n                <span className=\"text-[#9CA3AF] mr-2\">•</span>\n                <span>No automatic claim denials</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-[#9CA3AF] mr-2\">•</span>\n                <span>Fields below {Math.round(CONFIDENCE.THRESHOLD_MEDIUM * 100)}% confidence require review</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-[#9CA3AF] mr-2\">•</span>\n                <span>Policy clause matches require verification</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-[#9CA3AF] mr-2\">•</span>\n                <span>All decisions logged with audit trail</span>\n              </li>\n            </ul>\n          </div>\n          \n          <div>\n            <h4 className=\"text-xs font-medium text-[#6B7280] uppercase tracking-wider mb-4\">\n              Explainability Standards\n            </h4>\n            <ul className=\"text-sm text-[#374151] space-y-3\">\n              <li className=\"flex items-start\">\n                <span className=\"text-[#9CA3AF] mr-2\">•</span>\n                <span>Every extracted field has evidence source</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-[#9CA3AF] mr-2\">•</span>\n                <span>Policy clauses include similarity scores</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-[#9CA3AF] mr-2\">•</span>\n                <span>Clear rationale for each decision</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-[#9CA3AF] mr-2\">•</span>\n                <span>Complete audit trail maintained</span>\n              </li>\n            </ul>\n          </div>\n        </div>\n        \n        <div className=\"mt-8 pt-6 border-t border-[#E5E7EB]\">\n          <h4 className=\"text-xs font-medium text-[#6B7280] uppercase tracking-wider mb-2\">\n            Retraining & Improvement Loop\n          </h4>\n          <p className=\"text-sm text-[#374151] leading-relaxed\">\n            The system continuously learns from human overrides and feedback. When confidence thresholds are consistently exceeded or underperformed, \n            the AI models are retrained with new data to improve accuracy and reduce manual intervention.\n          </p>\n        </div>\n      </div>\n\n      {/* Actions */}\n      <div className=\"flex justify-between items-center pt-6 border-t border-[#E5E7EB]\">\n        <button\n          onClick={onReset}\n          className=\"btn-secondary inline-flex items-center space-x-2\"\n        >\n          <RefreshCw className=\"w-4 h-4\" />\n          <span>Process New Claim</span>\n        </button>\n        \n        <button className=\"btn-secondary inline-flex items-center space-x-2\">\n          <Download className=\"w-4 h-4\" />\n          <span>Export Report</span>\n        </button>\n      </div>\n    </div>\n  )\n} "],"names":[],"mappings":"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"}},
    {"offset": {"line": 6030, "column": 0}, "map": {"version":3,"sources":["file:///Users/pranaynath/Documents/GitHub/fnol/Autonomous-Claims-Orchestrator/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Header from '@/components/Header'\nimport HomePage from '@/components/HomePage'\nimport ReviewPage from '@/components/ReviewPage'\nimport DecisionPage from '@/components/DecisionPage'\nimport DashboardPage from '@/components/DashboardPage'\nimport { ClaimData, ProcessingStage } from '@/types/claims'\nimport { useAuth } from '@/lib/auth/AuthContext'\n\nexport default function Home() {\n  const router = useRouter()\n  const { isAuthenticated, loading } = useAuth()\n  const [currentStage, setCurrentStage] = useState<ProcessingStage>('home')\n  const [claimData, setClaimData] = useState<ClaimData | null>(null)\n  const [isProcessing, setIsProcessing] = useState(false)\n\n  // Redirect to login if not authenticated\n  useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push('/login')\n    }\n  }, [isAuthenticated, loading, router])\n\n  // Show loading state while checking authentication\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-white flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-12 h-12 border-4 border-[#2563EB] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-[#64748B]\">Loading...</p>\n        </div>\n      </div>\n    )\n  }\n\n  // Don't render main app if not authenticated\n  if (!isAuthenticated) {\n    return null\n  }\n\n  const handleStageChange = (stage: ProcessingStage) => {\n    // Prevent navigation to stages that require claimData if it's not available\n    if ((stage === 'review' || stage === 'decision' || stage === 'dashboard') && !claimData) {\n      // Stay on current stage or go to home\n      return\n    }\n    setCurrentStage(stage)\n  }\n\n  const handleClaimProcessed = (data: ClaimData) => {\n    setClaimData(data)\n    setCurrentStage('review')\n  }\n\n  const handleLoadClaim = async (claimId: string) => {\n    try {\n      const res = await fetch(`/api/claims/${encodeURIComponent(claimId)}`)\n      if (res.ok) {\n        const data = await res.json()\n        setClaimData(data)\n      }\n    } catch (err) {\n      console.error('Failed to load claim:', err)\n    }\n  }\n\n  const renderCurrentStage = () => {\n    switch (currentStage) {\n      case 'home':\n        return (\n          <HomePage\n            onProcessClaim={handleClaimProcessed}\n            isProcessing={isProcessing}\n            setIsProcessing={setIsProcessing}\n          />\n        )\n      case 'review':\n        return (\n          <ReviewPage\n            claimData={claimData!}\n            onNextStage={() => setCurrentStage('decision')}\n            onPreviousStage={() => setCurrentStage('home')}\n            onLoadClaim={handleLoadClaim}\n          />\n        )\n      case 'decision':\n        return (\n          <DecisionPage\n            claimData={claimData!}\n            onNextStage={() => setCurrentStage('dashboard')}\n            onPreviousStage={() => setCurrentStage('review')}\n            onLoadClaim={handleLoadClaim}\n          />\n        )\n      case 'dashboard':\n        return (\n          <DashboardPage\n            claimData={claimData!}\n            onReset={() => {\n              setCurrentStage('home')\n              setClaimData(null)\n            }}\n          />\n        )\n      default:\n        return <HomePage onProcessClaim={handleClaimProcessed} isProcessing={isProcessing} setIsProcessing={setIsProcessing} />\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white relative\">\n      <Header currentStage={currentStage} onStageChange={handleStageChange} />\n      <main className=\"container mx-auto px-8 py-16 relative z-10\">\n        {renderCurrentStage()}\n      </main>\n    </div>\n  )\n} "],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AAVA;;;;;;;;;AAYe,SAAS;;IACtB,MAAM,SAAS,IAAA,0LAAS;IACxB,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,IAAA,iLAAO;IAC5C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAkB;IAClE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAmB;IAC7D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,yCAAyC;IACzC,IAAA,kNAAS;0BAAC;YACR,IAAI,CAAC,WAAW,CAAC,iBAAiB;gBAChC,OAAO,IAAI,CAAC;YACd;QACF;yBAAG;QAAC;QAAiB;QAAS;KAAO;IAErC,mDAAmD;IACnD,IAAI,SAAS;QACX,qBACE,qOAAC;YAAI,WAAU;sBACb,cAAA,qOAAC;gBAAI,WAAU;;kCACb,qOAAC;wBAAI,WAAU;;;;;;kCACf,qOAAC;wBAAE,WAAU;kCAAiB;;;;;;;;;;;;;;;;;IAItC;IAEA,6CAA6C;IAC7C,IAAI,CAAC,iBAAiB;QACpB,OAAO;IACT;IAEA,MAAM,oBAAoB,CAAC;QACzB,4EAA4E;QAC5E,IAAI,CAAC,UAAU,YAAY,UAAU,cAAc,UAAU,WAAW,KAAK,CAAC,WAAW;YACvF,sCAAsC;YACtC;QACF;QACA,gBAAgB;IAClB;IAEA,MAAM,uBAAuB,CAAC;QAC5B,aAAa;QACb,gBAAgB;IAClB;IAEA,MAAM,kBAAkB,OAAO;QAC7B,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,YAAY,EAAE,mBAAmB,UAAU;YACpE,IAAI,IAAI,EAAE,EAAE;gBACV,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,aAAa;YACf;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,yBAAyB;QACzC;IACF;IAEA,MAAM,qBAAqB;QACzB,OAAQ;YACN,KAAK;gBACH,qBACE,qOAAC,6KAAQ;oBACP,gBAAgB;oBAChB,cAAc;oBACd,iBAAiB;;;;;;YAGvB,KAAK;gBACH,qBACE,qOAAC,+KAAU;oBACT,WAAW;oBACX,aAAa,IAAM,gBAAgB;oBACnC,iBAAiB,IAAM,gBAAgB;oBACvC,aAAa;;;;;;YAGnB,KAAK;gBACH,qBACE,qOAAC,iLAAY;oBACX,WAAW;oBACX,aAAa,IAAM,gBAAgB;oBACnC,iBAAiB,IAAM,gBAAgB;oBACvC,aAAa;;;;;;YAGnB,KAAK;gBACH,qBACE,qOAAC,kLAAa;oBACZ,WAAW;oBACX,SAAS;wBACP,gBAAgB;wBAChB,aAAa;oBACf;;;;;;YAGN;gBACE,qBAAO,qOAAC,6KAAQ;oBAAC,gBAAgB;oBAAsB,cAAc;oBAAc,iBAAiB;;;;;;QACxG;IACF;IAEA,qBACE,qOAAC;QAAI,WAAU;;0BACb,qOAAC,2KAAM;gBAAC,cAAc;gBAAc,eAAe;;;;;;0BACnD,qOAAC;gBAAK,WAAU;0BACb;;;;;;;;;;;;AAIT;GA5GwB;;QACP,0LAAS;QACa,iLAAO;;;KAFtB"}}]
}